/*!
 * 
 * Copyright (C) 2019, Bitmovin, Inc., All Rights Reserved
 * 
 * This source code and its use and distribution, is subject to the terms
 * and conditions of the applicable license agreement.
 * 
 * bitmovin-analytics version v2.5.4
 * 
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.analytics=t():(e.bitmovin=e.bitmovin||{},e.bitmovin.analytics=t())}(window,function(){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/Users/tigraine/projects/analytics/collector/build/release",n(n.s=17)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(20);t.validString=function(e){return null!=e&&"string"==typeof e},t.isNullOrEmptyString=function(e){return null==e||"string"!=typeof e||0===e.length},t.validBoolean=function(e){return null!=e&&"boolean"==typeof e},t.validNumber=function(e){return null!=e&&"number"==typeof e},t.sanitizePath=function(e){return e.replace(/\/$/g,"")},t.calculateTimeWithUndefined=function(e){return void 0===e?e:(e*=1e3,Math.round(e))},t.calculateTime=function(e){return e*=1e3,Math.round(e)},t.getCurrentTimestamp=function(){return Date.now()},t.getDurationFromTimestampToNow=function(e){return t.getCurrentTimestamp()-e},t.generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},t.getCookie=function(e){for(var t=e+"=",n=0,a=document.cookie.split(";");n<a.length;n++){for(var i=a[n];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return""},t.noOp=function(){},t.getCustomDataString=function(e){return"object"==typeof e?JSON.stringify(e):"function"==typeof e?t.getCustomDataString(e()):void 0===e?e:"string"!=typeof e?String(e):e},t.getDocumentPropWithPrefix=function(e){if(e in document)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0,a=["webkit","moz","ms","o"];n<a.length;n++){var i=a[n];if(i+t in document)return i+t}},t.isVideoInFullscreen=function(){var e=t.getDocumentPropWithPrefix("fullscreenElement");return void 0!==e&&document[e]&&"VIDEO"===document[e].nodeName},t.getHiddenProp=function(){return t.getDocumentPropWithPrefix("hidden")},t.getPageLoadType=function(){return!0===document[t.getHiddenProp()]?a.PAGE_LOAD_TYPE.BACKGROUND:a.PAGE_LOAD_TYPE.FOREGROUND},t.getHostnameAndPathFromUrl=function(e){var t=document.createElement("a");return t.href=e,{hostname:t.hostname,path:t.pathname}},t.calculatePercentage=function(e,t){if(void 0!==t&&0!==t)return Math.round((e||0)/t*100)},t.getBrowserInfo=function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?{name:"IE",version:(e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""}:"Chrome"===n[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?{name:e[1].replace("OPR","Opera"),version:e[2]}:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),{name:n[0],version:n[1]})},t.getURLResourceName=function(e){return 0===e.length?"":e.split("/").pop()||""},t.joinUrls=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.reduce(function(e,n){return(t.endsWith(e,"/")&&void 0!==n?e.substr(0,e.length-1):e)+"/"+(t.startsWith(n,"/")?n.substr(1):n)})},t.endsWith=function(e,t){return String.prototype.endsWith?e.endsWith(t):e.substring(e.length-t.length)===t},t.startsWith=function(e,t){return String.prototype.startsWith?e.startsWith(t):e.substring(0,t.length)===t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){void 0===e&&(e=!1),this.showLogs=e}return e.prototype.setLogging=function(e){this.showLogs=e},e.prototype.isLogging=function(){return this.showLogs},e.prototype.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.showLogs&&console.log.apply(console,[e].concat(t))},e.prototype.logTable=function(e){console.table(e)},e.prototype.errorMessageToUser=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];console.error.apply(console,[e].concat(t))},e.prototype.error=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.showLogs&&console.error.apply(console,[e].concat(t))},e.prototype.warning=function(e){this.showLogs&&console.warn(e)},e.prototype.warningMessageToUser=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];console.warn.apply(console,[e].concat(t))},e}();t.padRight=function(e,t){return(e+new Array(t).join(" ")).slice(0,t)},t.logger=new a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.BITMOVIN="bitmovin",e.JW="jw",e.RADIANT="radiant",e.VIDEOJS="videojs",e.HLSJS="hlsjs",e.SHAKA="shaka",e.DASHJS="dashjs",e.HTML5="html5"}(t.Player||(t.Player={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.READY="ready",e.SOURCE_LOADED="sourceLoaded",e.PLAY="play",e.PLAYING="playing",e.PAUSE="pause",e.TIMECHANGED="timechanged",e.SEEK="seek",e.SEEKED="seeked",e.START_CAST="startCasting",e.END_CAST="endCasting",e.START_BUFFERING="startBuffering",e.END_BUFFERING="endBuffering",e.AUDIOTRACK_CHANGED="audioTrackChanged",e.AUDIO_CHANGE="audioChange",e.VIDEO_CHANGE="videoChange",e.START_FULLSCREEN="startFullscreen",e.END_FULLSCREEN="endFullscreen",e.START_AD="adStart",e.SUBTITLE_CHANGE="subtitleChange",e.END_AD="adEnd",e.MUTE="mute",e.UN_MUTE="unMute",e.ERROR="playerError",e.PLAYBACK_FINISHED="end",e.SCREEN_RESIZE="resize",e.UNLOAD="unload",e.END="end",e.METADATA_LOADED="metadataLoaded",e.SOURCE_UNLOADED="sourceUnloaded",e.MANUAL_SOURCE_CHANGE="manualSourceChangeInitiated"}(t.Event||(t.Event={}))},function(e,t,n){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(1),s=n(7),o=n(21),E=n(11),l=n(32),c=n(37),u=n(38),d=function(){function e(e,t,n){var s=this;this.pageLoadTime=0,this.playerStartupTime=0,this.autoplay=void 0,this.droppedSampleFrames=0,this.backendFactory=new o.BackendFactory,this.setCustomDataOnce=function(e){var t=s.config;s.setCustomData(e),s.setCustomData(t)},this.guardAgainstMissingVideoTitle=function(e,t){e&&t&&e.title&&!t.title&&r.logger.error("The new analytics configuration does not contain the field title")},this.sourceChange=function(e){r.logger.log("Processing Source Change for Analytics",e),s.guardAgainstMissingVideoTitle(s.config,e);var t=(s.config||{}).config;null!=e&&(t=a({},t,{enabled:!0},e.config));var n=a({},s.config,e,{config:t});s.adapter.sourceChange(n,i.getCurrentTimestamp())},this.setCustomData=function(e){var t,n,i,r,o,E,l,c;s.sendAnalyticsRequestAndClearValues(),s.config=a({},s.config,(n=(t=e).customData1,i=t.customData2,r=t.customData3,o=t.customData4,E=t.customData5,l=t.experimentName,c={customData1:n,customData2:i,customData3:r,customData4:o,customData5:E,experimentName:l},n&&(c.customData1=n),i&&(c.customData2=i),r&&(c.customData3=r),o&&(c.customData4=o),E&&(c.customData5=E),l&&(c.experimentName=l),c)),s.setConfigParameters()},this.getCurrentImpressionId=function(){return s.sample.impressionId},this.config=e,this.adapter=n,this.sessionHandler=new u.SessionPersistenceHandler(e);var E=this.adapter.onLicenseKeyReceived.subscribe(function(e){s.config.key||(s.config.key=e.licenseKey),E()});if(this.adapter.adModule)new l.AdAnalytics(this,this.adapter.adModule);this.startupTime=0,this.sample=this.setupSample(),this.init(),this.setupStateMachineCallbacks(),this.adapter.initialize&&this.adapter.initialize()}return Object.defineProperty(e.prototype,"version",{get:function(){return E.VERSION},enumerable:!0,configurable:!0}),e.prototype.getPlayerInformationFromAdapter=function(){var e=this.config.player||this.adapter.getPlayerName();return{player:e,version:e+"-"+this.adapter.getPlayerVersion(),playerTech:this.adapter.getPlayerTech()}},e.prototype.updateSamplesToCastClientConfig=function(e,t){for(var n=0,a=e;n<a.length;n++){var i=a[n];this.updateSampleToCastClientConfig(i,t)}},e.prototype.updateSampleToCastClientConfig=function(e,t){var n=t.config,a=t.userId,i=t.impressionId,r=t.domain,s=t.path,o=t.language,E=t.userAgent;e.impressionId=i,e.userId=a,e.userAgent=E,e.domain=r,e.path=s,e.language=o,this.setConfigParameters(e,n)},e.prototype.init=function(){!0===this.adapter.supportsDeferredLicenseLoading||""!==this.config.key&&i.validString(this.config.key)?(r.logger.setLogging(this.config.debug||!1),this.backend=this.createBackend(this.config),this.setConfigParameters(),this.generateNewImpressionId(),this.setUserId()):r.logger.error("Invalid analytics license key provided")},e.prototype.setConfigParameters=function(e,t){void 0===e&&(e=this.sample),void 0===t&&(t=this.config),e.key=t.key,e.playerKey=t.playerKey,t.player&&(e.player=t.player),e.domain=this.getDomainFromConfig(t)||i.sanitizePath(window.location.hostname),e.cdnProvider=t.cdnProvider,e.videoId=t.videoId,e.videoTitle=t.title,e.customUserId=t.userId,e.customData1=i.getCustomDataString(t.customData1),e.customData2=i.getCustomDataString(t.customData2),e.customData3=i.getCustomDataString(t.customData3),e.customData4=i.getCustomDataString(t.customData4),e.customData5=i.getCustomDataString(t.customData5),e.experimentName=t.experimentName},e.prototype.generateNewImpressionId=function(){this.sample.impressionId=i.generateUUID()},e.prototype.setUserId=function(){this.sample.userId=this.sessionHandler.userId},e.prototype.setupStateMachineCallbacks=function(){var e=this;this.adapter.stateMachineCallbacks.setup=function(t,n,a){if(r.logger.log("Setup bitmovin analytics "+e.sample.analyticsVersion+" with impressionId: "+e.sample.impressionId),e.setDuration(t),e.setState(n),e.playerStartupTime=e.sample.playerStartupTime=t,window.performance&&window.performance.timing){var s=i.getCurrentTimestamp()-window.performance.timing.navigationStart;e.pageLoadTime=e.sample.pageLoadTime=s}e.startupTime=t,e.sendAnalyticsRequestAndClearValues(),e.sample.pageLoadTime=0},this.adapter.stateMachineCallbacks.startup=function(t,n){e.setDuration(t),e.sample.videoStartupTime=t,e.sample.supportedVideoCodecs=c.CodecHelper.supportedVideoFormats,e.setState(n),e.startupTime>0&&(e.startupTime+=t),e.sample.startupTime=e.startupTime,e.autoplay=e.sample.autoplay=e.adapter.getAutoPlay();var a=e.adapter.drmPerformanceInfo;a.drmUsed&&(e.sample.drmType=a.drmInfo,e.sample.drmLoadTime=a.drmTime),e.sendAnalyticsRequestAndClearValues(),e.sample.autoplay=void 0},this.adapter.stateMachineCallbacks.playing=function(t,n,a){e.setDuration(t),e.setState(n),e.sample.played=t,e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.playingAndBye=function(t,n,a){e.setDuration(t),e.setState(n),e.sample.played=t,e.sendUnloadRequest()},this.adapter.stateMachineCallbacks.heartbeat=function(t,n,a){e.setState(n),e.setDuration(t),e.sample.played=e.sample.duration,e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.qualitychange=function(t,n){e.setDuration(t),e.setState(n),e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.qualitychange_pause=function(t,n){e.setDuration(t),e.setState(n),e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.qualitychange_rebuffering=function(t,n){e.setDuration(t),e.setState(n),e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.videoChange=function(t){e.adapter.stateMachineCallbacks.setVideoTimeEndFromEvent(t),e.adapter.stateMachineCallbacks.setVideoTimeStartFromEvent(t),e.setPlaybackVideoPropertiesFromEvent(t)},this.adapter.stateMachineCallbacks.audioChange=function(t){e.adapter.stateMachineCallbacks.setVideoTimeEndFromEvent(t),e.adapter.stateMachineCallbacks.setVideoTimeStartFromEvent(t),e.setPlaybackAudioPropertiesFromEvent(t)},this.adapter.stateMachineCallbacks.audiotrack_changing=function(){e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.pause=function(t,n,a){e.setDuration(t),e.setState(n),e.sample.paused=t,e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.paused_seeking=function(t,n,a){e.setDuration(t),e.setState(n),e.sample.seeked=t,e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.end_play_seeking=function(t,n,a){e.setState(n),e.setDuration(t),e.sample.seeked=t,e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.rebuffering=function(t,n,a){e.setDuration(t),e.setState(n),e.sample.buffered=t,e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.error=function(t){e.adapter.stateMachineCallbacks.setVideoTimeEndFromEvent(t),e.adapter.stateMachineCallbacks.setVideoTimeStartFromEvent(t),e.setState("error"),e.sample.errorCode=t.code,e.sample.errorMessage=t.message,e.sample.errorData=JSON.stringify(t.data);var n=e.adapter.segments.map(function(e){return e.name});e.sample.errorSegments=n,e.adapter.onError&&e.adapter.onError(),e.sendAnalyticsRequestAndClearValues(),delete e.sample.errorCode,delete e.sample.errorMessage,delete e.sample.errorData},this.adapter.stateMachineCallbacks.ad=function(t,n,a){e.setDuration(t),e.setState(n),e.sample.ad=t,e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.mute=function(){e.sample.isMuted=!0},this.adapter.stateMachineCallbacks.unMute=function(){e.sample.isMuted=!1},this.adapter.stateMachineCallbacks.subtitle_changing=function(){e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.setVideoTimeEndFromEvent=function(t){i.validNumber(t.currentTime)&&(e.sample.videoTimeEnd=i.calculateTime(t.currentTime))},this.adapter.stateMachineCallbacks.setVideoTimeStartFromEvent=function(t){i.validNumber(t.currentTime)&&(e.sample.videoTimeStart=i.calculateTime(t.currentTime))},this.adapter.stateMachineCallbacks.manualSourceChange=function(t){e.sample=e.setupSample(),e.startupTime=0,e.config=t.config,e.init()},this.adapter.stateMachineCallbacks.initialSourceChange=function(t){e.config=t.config,e.setConfigParameters()},this.adapter.stateMachineCallbacks.end=function(t,n,a){e.sample=e.setupSample(),e.startupTime=0,e.init()}},e.prototype.setDuration=function(e){this.sample.duration=e},e.prototype.setState=function(e){this.sample.state=e},e.prototype.setPlaybackVideoPropertiesFromEvent=function(e){i.validNumber(e.width)&&(this.sample.videoPlaybackWidth=e.width),i.validNumber(e.height)&&(this.sample.videoPlaybackHeight=e.height),i.validNumber(e.bitrate)&&(this.sample.videoBitrate=e.bitrate),i.validString(e.codec)&&(this.sample.videoCodec=e.codec)},e.prototype.setPlaybackAudioPropertiesFromEvent=function(e){i.validNumber(e.bitrate)&&(this.sample.audioBitrate=e.bitrate),i.validString(e.codec)&&(this.sample.audioCodec=e.codec)},e.prototype.setPlaybackInfoFromAdapter=function(){var e=this.adapter.getCurrentPlaybackInfo();e&&(i.validBoolean(e.isLive)&&(this.sample.isLive=e.isLive),i.validString(e.size)&&(this.sample.size=e.size),i.validString(e.playerTech)&&(this.sample.playerTech=e.playerTech),i.validNumber(e.videoDuration)&&(this.sample.videoDuration=i.calculateTime(e.videoDuration||0)),i.validString(e.streamFormat)&&(this.sample.streamFormat=e.streamFormat),i.validString(e.mpdUrl)&&(this.sample.mpdUrl=e.mpdUrl),i.validString(e.m3u8Url)&&(this.sample.m3u8Url=e.m3u8Url),i.validString(e.progUrl)&&(this.sample.progUrl=e.progUrl),i.validNumber(e.videoWindowWidth)&&(this.sample.videoWindowWidth=e.videoWindowWidth),i.validNumber(e.videoWindowHeight)&&(this.sample.videoWindowHeight=e.videoWindowHeight),i.validNumber(e.screenHeight)&&(this.sample.screenHeight=e.screenHeight),i.validNumber(e.screenWidth)&&(this.sample.screenWidth=e.screenWidth),i.validNumber(e.videoPlaybackHeight)&&(this.sample.videoPlaybackHeight=e.videoPlaybackHeight),i.validNumber(e.videoPlaybackWidth)&&(this.sample.videoPlaybackWidth=e.videoPlaybackWidth),i.validNumber(e.videoBitrate)&&(this.sample.videoBitrate=e.videoBitrate),i.validNumber(e.audioBitrate)&&(this.sample.audioBitrate=e.audioBitrate),i.validBoolean(e.isMuted)&&(this.sample.isMuted=e.isMuted),i.validBoolean(e.isCasting)&&(this.sample.isCasting=e.isCasting),i.validString(e.videoTitle)&&!this.config.title&&(this.sample.videoTitle=e.videoTitle),i.validString(e.audioCodec)&&(this.sample.audioCodec=e.audioCodec),i.validString(e.videoCodec)&&(this.sample.videoCodec=e.videoCodec),i.validString(e.audioLanguage)&&(this.sample.audioLanguage=e.audioLanguage),i.validBoolean(e.subtitleEnabled)&&(this.sample.subtitleEnabled=e.subtitleEnabled),i.validString(e.subtitleLanguage)?this.sample.subtitleLanguage=e.subtitleLanguage:this.sample.subtitleLanguage=void 0,i.validNumber(e.droppedFrames)&&(this.droppedSampleFrames=this.sample.droppedFrames=e.droppedFrames<this.droppedSampleFrames?e.droppedFrames:e.droppedFrames-this.droppedSampleFrames))},e.prototype.setupSample=function(){return a({platform:"web",playerStartupTime:0,pageLoadType:i.getPageLoadType(),path:i.sanitizePath(window.location.pathname),language:navigator.language||navigator.userLanguage,userAgent:navigator.userAgent,screenWidth:screen.width,screenHeight:screen.height,isLive:!1,videoDuration:0,size:s.PlayerSize.Window,time:0,videoWindowWidth:0,videoWindowHeight:0,droppedFrames:0,played:0,buffered:0,paused:0,ad:0,seeked:0,videoPlaybackWidth:0,videoPlaybackHeight:0,videoBitrate:0,audioBitrate:0,videoTimeStart:0,videoTimeEnd:0,videoStartupTime:0,duration:0,startupTime:0,analyticsVersion:E.VERSION,pageLoadTime:0},this.getPlayerInformationFromAdapter())},e.prototype.sendAnalyticsRequest=function(){this.setPlaybackInfoFromAdapter(),this.sample.time=i.getCurrentTimestamp(),this.sample.downloadSpeedInfo=this.adapter.downloadSpeedInfo;var e=a({},this.sample);this.backend.sendRequest(e)},e.prototype.sendAnalyticsRequestAndClearValues=function(){this.sendAnalyticsRequest(),this.clearValues()},e.prototype.sendUnloadRequest=function(){this.backend.sendUnloadRequest(this.sample)},e.prototype.sendAnalyticsRequestSynchronous=function(){this.backend.sendRequestSynchronous(this.sample)},e.prototype.clearValues=function(){this.sample.ad=0,this.sample.paused=0,this.sample.played=0,this.sample.seeked=0,this.sample.buffered=0,this.sample.playerStartupTime=0,this.sample.videoStartupTime=0,this.sample.startupTime=0,this.sample.duration=0,this.sample.droppedFrames=0,this.sample.drmType=void 0,this.sample.drmLoadTime=void 0,this.adapter.clearValues()},e.prototype.getDomainFromConfig=function(e){var t=e.config;return null!=t&&null!=t.origin?t.origin:void 0},e.prototype.createBackend=function(e){var t=this.getDomainFromConfig(e)||i.sanitizePath(window.location.hostname);return this.backendFactory.createBackend(e,{key:e.key,domain:t,version:E.VERSION},this.adapter)},e.version=E.VERSION,e.LICENSE_CALL_PENDING_TIMEOUT=200,e.PAGE_LOAD_TYPE_TIMEOUT=200,e.CAST_RECEIVER_CONFIG_MESSAGE="CAST_RECEIVER_CONFIG_MESSAGE",e}();t.Analytics=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),i=function(){function e(){}return e.prototype.getCurrentImpressionId=function(){if(this.guardAgainstNotInitializedAnalytics())return this.analytics.getCurrentImpressionId()},e.prototype.setCustomData=function(e){this.guardAgainstNotInitializedAnalytics()&&this.analytics.setCustomData(e)},e.prototype.setCustomDataOnce=function(e){this.guardAgainstNotInitializedAnalytics()&&this.analytics.setCustomDataOnce(e)},e.prototype.sourceChange=function(e){this.guardAgainstNotInitializedAnalytics()&&this.analytics.sourceChange(e)},e.prototype.guardAgainstNotInitializedAnalytics=function(){return!!this.analytics||(a.logger.log("Bitmovin Analytics: Adapter hasn't been initialized yet"),!1)},e}();t.Adapter=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i="video/mp4",r="video/webm",s="application/x-mpegURL",o="application/dash+xml";t.MIMETypes={MP4:i,WEBM:r,HLS:s,DASH:o},t.getMIMETypeFromFileExtension=function(e){return e=e.toLowerCase(),a.endsWith(e,".m3u8")?s:a.endsWith(e,".mp4")||a.endsWith(e,".m4v")||a.endsWith(e,".m4a")?i:a.endsWith(e,".webm")?r:a.endsWith(e,".mpd")?o:void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Window="WINDOW",e.Fullscreen="FULLSCREEN"}(t.PlayerSize||(t.PlayerSize={}))},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(9),o=n(41),E=n(2),l=n(3),c=n(14),u=n(6),d=n(7),m=n(0),A=function(e){function t(t,n){var a=e.call(this,n)||this;return a.mediaElement=t,a._drmPerformanceInfo={drmUsed:!1},a.getPlayerName=function(){return E.Player.HTML5},a.getPlayerTech=function(){return"html5"},a.getAutoPlay=function(){return!!a.mediaElement&&a.mediaElement.autoplay},a.isLive=function(){return!!a.mediaElement&&a.mediaElement.duration===1/0},a.stateMachine=new o.HTML5AnalyticsStateMachine(a.stateMachineCallbacks,a.opts),a.mediaElEventHandlers=[],a.analyticsBitrate=-1,a.bufferingTimeout=void 0,a.isBuffering=!1,a.lastIsLiveStatus=!1,a.isPaused=!1,a.previousMediaTime=0,a.needsReadyEvent=!0,a.needsFirstPlayIntent=!0,a.mediaElementSet=!1,a}return i(t,e),Object.defineProperty(t.prototype,"drmPerformanceInfo",{get:function(){return this._drmPerformanceInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"segments",{get:function(){return[]},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){this.mediaElement&&this.setMediaElement()},t.prototype.getStreamSources=function(e){if(!e)return{};switch(this.getStreamType()){case"hls":return{m3u8Url:e};case"dash":return{mpdUrl:e};default:return{progUrl:e}}},t.prototype.getCurrentPlaybackInfo=function(){var e=r({},this.getCommonPlaybackInfo(),this.getStreamSources(this.getStreamURL()),{streamFormat:this.getStreamType(),isLive:this.isLive(),size:m.isVideoInFullscreen()?d.PlayerSize.Fullscreen:d.PlayerSize.Window,playerTech:this.getPlayerTech(),droppedFrames:0});this.mediaElement&&(e=r({},e,{videoDuration:this.mediaElement.duration,isMuted:this.mediaElement.muted,videoWindowHeight:this.mediaElement.height,videoWindowWidth:this.mediaElement.width}));var t=this.getCurrentQualityLevelInfo();return t&&(e=r({},e,{videoPlaybackHeight:t.height,videoPlaybackWidth:t.width,videoBitrate:t.bitrate})),e},t.prototype.setMediaElement=function(e){if(void 0===e&&(e=null),e&&this.mediaElement&&(this.unregisterMediaElement(),this.mediaElementSet=!1),e&&(this.mediaElement=e),!this.mediaElement)throw new Error("No media element owned");if(this.mediaElementSet)throw new Error("Media element already set (only call this once)");this.mediaElementSet=!0,this.registerMediaElement(),this.onMaybeReady()},t.prototype.getMIMEType=function(){var e=this.getStreamURL();if(e&&void 0!==e)return u.getMIMETypeFromFileExtension(e)},t.prototype.getStreamType=function(){var e=this.getMIMEType();if(e)return c.getStreamTypeFromMIMEType(e)},t.prototype.getStreamURL=function(){var e=this.mediaElement;if(e)return e.src},t.prototype.resetMedia=function(){this.mediaElement=null,this.mediaElEventHandlers=[],window.clearTimeout(this.bufferingTimeout)},t.prototype.registerMediaElement=function(){var e=this,t=this.mediaElement;t&&(this.listenToMediaElementEvent("loadedmetadata",function(){1===t.readyState&&(e.checkQualityLevelAttributes(!0),e.eventCallback(l.Event.METADATA_LOADED,null))}),this.listenToMediaElementEvent("play",function(){var n=t.currentTime;e.needsFirstPlayIntent=!1,e.eventCallback(l.Event.PLAY,{currentTime:n})}),this.listenToMediaElementEvent("pause",function(){e.onPaused()}),this.listenToMediaElementEvent("playing",function(){var n=t.currentTime;e.isPaused=!1,e.needsFirstPlayIntent||e.eventCallback(l.Event.TIMECHANGED,{currentTime:n})}),this.listenToMediaElementEvent("error",function(){var n=t.currentTime,a=t.error;e.eventCallback(l.Event.ERROR,{currentTime:n,code:a?a.code:null,message:a?a.message:null})}),this.listenToMediaElementEvent("volumechange",function(){var n=t.muted,a=t.currentTime;n?e.eventCallback(l.Event.MUTE,{currentTime:a}):e.eventCallback(l.Event.UN_MUTE,{currentTime:a})}),this.listenToMediaElementEvent("seeking",function(){var n=t.currentTime;e.eventCallback(l.Event.SEEK,{currentTime:n})}),this.listenToMediaElementEvent("seeked",function(){var n=t.currentTime;clearTimeout(e.bufferingTimeout),e.eventCallback(l.Event.SEEKED,{currentTime:n})}),this.listenToMediaElementEvent("timeupdate",function(){var n=t.currentTime;e.isBuffering=!1,e.needsFirstPlayIntent||(e.isPaused||e.eventCallback(l.Event.TIMECHANGED,{currentTime:n}),e.checkQualityLevelAttributes(),e.checkPlayheadProgress(),e.previousMediaTime=n)}),this.listenToMediaElementEvent("stalled",function(){}),this.listenToMediaElementEvent("waiting",function(){e.onBuffering()}))},t.prototype.listenToMediaElementEvent=function(e,t){if(!this.mediaElement)throw new Error("No media attached");var n=t.bind(this);this.mediaElEventHandlers.push({event:e,handler:n}),this.mediaElement.addEventListener(e,n,!1)},t.prototype.onMaybeReady=function(){if(this.needsReadyEvent&&this.mediaElement){this.needsReadyEvent=!1;var e=this.getCurrentPlaybackInfo();this.stateMachine.updateMetadata(),this.eventCallback(l.Event.READY,e)}},t.prototype.unregisterMediaElement=function(){if(!this.mediaElement)throw new Error("No media attached");var e=this.mediaElement;this.mediaElEventHandlers.forEach(function(t){e.removeEventListener(t.event,t.handler)}),this.resetMedia()},t.prototype.onBuffering=function(){if(!this.mediaElement)throw new Error("No media attached");var e=this.mediaElement.currentTime;this.isBuffering||this.isPaused||(this.eventCallback(l.Event.START_BUFFERING,{currentTime:e}),this.isBuffering=!0)},t.prototype.onPaused=function(){if(!this.isPaused){if(!this.mediaElement)throw new Error("No media attached");var e=this.mediaElement.currentTime;this.eventCallback(l.Event.PAUSE,{currentTime:e}),this.isPaused=!0}},t.prototype.checkPlayheadProgress=function(){var e=this;if(!this.mediaElement)throw new Error("No media attached");var n=this.mediaElement;n.paused&&this.onPaused(),clearTimeout(this.bufferingTimeout),this.bufferingTimeout=window.setTimeout(function(){n.paused||n.ended&&!e.isBuffering||n.currentTime-e.previousMediaTime<t.BUFFERING_TIMECHANGED_TIMEOUT&&e.onBuffering()},t.BUFFERING_TIMECHANGED_TIMEOUT)},t.prototype.checkQualityLevelAttributes=function(e){if(void 0===e&&(e=!1),!this.mediaElement)throw new Error("No media attached");var t=this.mediaElement,n=this.getCurrentQualityLevelInfo();if(n){var a=n.bitrate,i=n.width,r=n.height,s=this.isLive();if(s!==this.lastIsLiveStatus&&(this.lastIsLiveStatus=s,e||this.stateMachine.updateMetadata()),this.analyticsBitrate!==a){var o={width:i,height:r,bitrate:a,currentTime:t.currentTime};e||this.eventCallback(l.Event.VIDEO_CHANGE,o),this.analyticsBitrate=a}}},t.prototype.sourceChange=function(e,t){this.stateMachine.sourceChange(e,t,this.mediaElement?this.mediaElement.currentTime:void 0)},t.BUFFERING_TIMECHANGED_TIMEOUT=1e3,t}(s.InternalAdapter);t.HTML5InternalAdapter=A},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(1),r=n(40),s=function(){function e(e){var t=this;this.stateMachineCallbacks={setup:function(e,t,n){},startup:function(e,t){},updateSample:function(){},playing:function(e,t,n){},playingAndBye:function(e,t,n){},heartbeat:function(e,t,n){},qualitychange:function(e,t){},qualitychange_pause:function(e,t){},qualitychange_rebuffering:function(e,t){},videoChange:function(e){},audioChange:function(e){},audiotrack_changing:function(){},pause:function(e,t,n){},paused_seeking:function(e,t,n){},end_play_seeking:function(e,t,n){},rebuffering:function(e,t,n){},error:function(e){},end:function(e,t,n){},ad:function(e,t,n){},mute:function(){},unMute:function(){},subtitle_changing:function(){},setVideoTimeEndFromEvent:function(e){},setVideoTimeStartFromEvent:function(e){},source_changing:function(e,t,n){},ready:function(e,t,n){},startCasting:function(e,t){},manualSourceChange:function(e){},initialSourceChange:function(e){},muting_ready:function(e,t,n){}},this._onLicenseKeyReceived=new r.EventDispatcher,this._onLicenseCallFailed=new r.EventDispatcher,this.eventCallback=function(e,n){n=n||{},t.stateMachine?t.stateMachine.callEvent(e,n,a.getCurrentTimestamp()):i.logger.log("Bitmovin Analytics: StateMachine isn't ready yet")},e||(e={starttime:void 0}),e.starttime||(e.starttime=a.getCurrentTimestamp()),this.opts=e}return Object.defineProperty(e.prototype,"onLicenseKeyReceived",{get:function(){return this._onLicenseKeyReceived},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onLicenseCallFailed",{get:function(){return this._onLicenseCallFailed},enumerable:!0,configurable:!0}),e.prototype.getCommonPlaybackInfo=function(){return{screenHeight:screen.height,screenWidth:screen.width}},e.prototype.clearValues=function(){},e.prototype.clearSegments=function(){},Object.defineProperty(e.prototype,"downloadSpeedInfo",{get:function(){return{segmentsDownloadCount:0,segmentsDownloadSize:0,segmentsDownloadTime:0,avgDownloadSpeed:0,minDownloadSpeed:0,maxDownloadSpeed:0,avgTimeToFirstByte:0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segments",{get:function(){return[]},enumerable:!0,configurable:!0}),e}();t.InternalAdapter=s},function(e,t,n){var a;a={VERSION:"2.4.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(e,t){var n="string"==typeof e.initial?{state:e.initial}:e.initial,i=e.terminal||e.final,r=t||e.target||{},s=e.events||[],o=e.callbacks||{},E={},l={},c=function(e){var t=Array.isArray(e.from)?e.from:e.from?[e.from]:[a.WILDCARD];E[e.name]=E[e.name]||{};for(var n=0;n<t.length;n++)l[t[n]]=l[t[n]]||[],l[t[n]].push(e.name),E[e.name][t[n]]=e.to||t[n];e.to&&(l[e.to]=l[e.to]||[])};n&&(n.event=n.event||"startup",c({name:n.event,from:"none",to:n.state}));for(var u=0;u<s.length;u++)c(s[u]);for(var d in E)E.hasOwnProperty(d)&&(r[d]=a.buildEvent(d,E[d]));for(var d in o)o.hasOwnProperty(d)&&(r[d]=o[d]);return r.current="none",r.is=function(e){return Array.isArray(e)?e.indexOf(this.current)>=0:this.current===e},r.can=function(e){return!this.transition&&void 0!==E[e]&&(E[e].hasOwnProperty(this.current)||E[e].hasOwnProperty(a.WILDCARD))},r.cannot=function(e){return!this.can(e)},r.transitions=function(){return(l[this.current]||[]).concat(l[a.WILDCARD]||[])},r.isFinished=function(){return this.is(i)},r.error=e.error||function(e,t,n,a,i,r,s){throw s||r},r.states=function(){return Object.keys(l).sort()},n&&!n.defer&&r[n.event](),r},doCallback:function(e,t,n,i,r,s){if(t)try{return t.apply(e,[n,i,r].concat(s))}catch(t){return e.error(n,i,r,s,a.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",t)}},beforeAnyEvent:function(e,t,n,i,r){return a.doCallback(e,e.onbeforeevent,t,n,i,r)},afterAnyEvent:function(e,t,n,i,r){return a.doCallback(e,e.onafterevent||e.onevent,t,n,i,r)},leaveAnyState:function(e,t,n,i,r){return a.doCallback(e,e.onleavestate,t,n,i,r)},enterAnyState:function(e,t,n,i,r){return a.doCallback(e,e.onenterstate||e.onstate,t,n,i,r)},changeState:function(e,t,n,i,r){return a.doCallback(e,e.onchangestate,t,n,i,r)},beforeThisEvent:function(e,t,n,i,r){return a.doCallback(e,e["onbefore"+t],t,n,i,r)},afterThisEvent:function(e,t,n,i,r){return a.doCallback(e,e["onafter"+t]||e["on"+t],t,n,i,r)},leaveThisState:function(e,t,n,i,r){return a.doCallback(e,e["onleave"+n],t,n,i,r)},enterThisState:function(e,t,n,i,r){return a.doCallback(e,e["onenter"+i]||e["on"+i],t,n,i,r)},beforeEvent:function(e,t,n,i,r){if(!1===a.beforeThisEvent(e,t,n,i,r)||!1===a.beforeAnyEvent(e,t,n,i,r))return!1},afterEvent:function(e,t,n,i,r){a.afterThisEvent(e,t,n,i,r),a.afterAnyEvent(e,t,n,i,r)},leaveState:function(e,t,n,i,r){var s=a.leaveThisState(e,t,n,i,r),o=a.leaveAnyState(e,t,n,i,r);return!1!==s&&!1!==o&&(a.ASYNC===s||a.ASYNC===o?a.ASYNC:void 0)},enterState:function(e,t,n,i,r){a.enterThisState(e,t,n,i,r),a.enterAnyState(e,t,n,i,r)},buildEvent:function(e,t){return function(){var n=this.current,i=t[n]||(t[a.WILDCARD]!=a.WILDCARD?t[a.WILDCARD]:n)||n,r=Array.prototype.slice.call(arguments);if(this.transition)return this.error(e,n,i,r,a.Error.PENDING_TRANSITION,"event "+e+" inappropriate because previous transition did not complete");if(this.cannot(e))return this.error(e,n,i,r,a.Error.INVALID_TRANSITION,"event "+e+" inappropriate in current state "+this.current);if(!1===a.beforeEvent(this,e,n,i,r))return a.Result.CANCELLED;if(n===i)return a.afterEvent(this,e,n,i,r),a.Result.NOTRANSITION;var s=this;this.transition=function(){return s.transition=null,s.current=i,a.enterState(s,e,n,i,r),a.changeState(s,e,n,i,r),a.afterEvent(s,e,n,i,r),a.Result.SUCCEEDED},this.transition.cancel=function(){s.transition=null,a.afterEvent(s,e,n,i,r)};var o=a.leaveState(this,e,n,i,r);return!1===o?(this.transition=null,a.Result.CANCELLED):a.ASYNC===o?a.Result.PENDING:this.transition?this.transition():void 0}}},e.exports&&(t=e.exports=a),t.StateMachine=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION="v2.5.4"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1);t.post=function(e,t,n,i){var r;void 0===i&&(i=!0);var s=!1;window.XDomainRequest&&(s=!0),r=s?new window.XDomainRequest:new XMLHttpRequest;var o=function(){if(r.readyState==XMLHttpRequest.DONE){if(r.responseText<=0)return;var e=JSON.parse(r.responseText);n(e)}};s?r.onload=o:r.onreadystatechange=o;try{r.open("POST",e,i),s||r.setRequestHeader("Content-Type","text/plain"),r.send(JSON.stringify(t))}catch(e){a.logger.error("Failed to send POST request.",e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MESSAGE_NAMESPACE="urn:x-cast:com.bitmovin.analytics.cast",t.ANALYTICS_BACKEND_BASE_URL="https://analytics-ingress-global.bitmovin.com",t.ANALYTICS_LICENSECALL_TIMEOUT=6e4},function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),r=i.MIMETypes.MP4,s=i.MIMETypes.WEBM,o=i.MIMETypes.HLS,E=i.MIMETypes.DASH,l=((a={})[r]="progressive",a[s]="progressive",a[o]="hls",a[E]="dash",a);t.getStreamTypeFromMIMEType=function(e){return l[e]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){return function(e,t,n,a,i){this.event=e,this.from=t,this.to=n,this.timestamp=a,this.eventObject=i}}();t.EventDebugging=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSourceInfoFromBitmovinSourceConfig=function(e,t){if(!e)return{progBitrate:void 0,progUrl:void 0};if("string"==typeof e)return{progBitrate:0,progUrl:e};if(Array.isArray(e)){var n=+t.getPlaybackVideoData().id;return isNaN(n)&&(n=0),{progBitrate:e[n].bitrate||0,progUrl:e[n].url}}return"object"==typeof e?{progBitrate:e.bitrate||0,progUrl:e.url}:{progBitrate:void 0,progUrl:void 0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2);t.Players=a.Player;var i=n(18);t.CdnProviders=i.CdnProvider;var r=n(11);t.version=r.VERSION;var s=n(19);t.HlsAdapter=s.HlsAdapter;var o=n(42);t.Bitmovin8Adapter=o.Bitmovin8Adapter;var E=n(54);t.Bitmovin7Adapter=E.Bitmovin7Adapter;var l=n(57);t.VideojsAdapter=l.VideojsAdapter;var c=n(60);t.ShakaAdapter=c.ShakaAdapter;var u=n(62);t.DashjsAdapter=u.DashjsAdapter;var d=n(64);t.HTMLVideoElementAdapter=d.HTMLVideoElementAdapter;var m={name:"analytics",module:{Analytics:o.Bitmovin8Adapter},hooks:{setup:function(e,t){var n=t.getConfig();if(!n||!1===n.analytics)return Promise.resolve();var a=new(0,e.Analytics)(t);return Promise.resolve(a)}}};t.PlayerModule=m;var A={HlsAdapter:s.HlsAdapter,Bitmovin8Adapter:o.Bitmovin8Adapter,Bitmovin7Adapter:E.Bitmovin7Adapter,VideojsAdapter:l.VideojsAdapter,ShakaAdapter:c.ShakaAdapter,DashjsAdapter:u.DashjsAdapter,HTMLVideoElementAdapter:d.HTMLVideoElementAdapter};t.adapters=A,t.default={PlayerModule:m}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.CLOUDFLARE="cloudflare",e.AKAMAI="akamai",e.FASTLY="fastly",e.MAXCDN="maxcdn",e.CLOUDFRONT="cloudfront",e.CHINACACHE="chinacache",e.BITGRAVITY="bitgravity"}(t.CdnProvider||(t.CdnProvider={}))},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),s=n(5),o=n(39),E=function(e){function t(t,n,a){var i=e.call(this)||this;return i.internalAdapter=new o.HlsInternalAdapter(n,a),i.analytics=new r.Analytics(t,n,i.internalAdapter),i}return i(t,e),t}(s.Adapter);t.HlsAdapter=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.FOREGROUND=1]="FOREGROUND",e[e.BACKGROUND=2]="BACKGROUND"}(t.PAGE_LOAD_TYPE||(t.PAGE_LOAD_TYPE={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(22),i=n(28),r=n(29),s=n(13),o=n(30),E=n(31),l=function(){function e(){}return e.prototype.createBackend=function(e,t,n){var a=this.createInnerBackend(e,t,n);return e.debug?new i.DebuggingBackend(e,a):a},e.prototype.createInnerBackend=function(e,t,n){if(void 0===this.backend){var i=e.config&&e.config.backendUrl||s.ANALYTICS_BACKEND_BASE_URL,l=new a.LicenseCheckingBackend(t,o.LicenseCall,i,n);this.backend=new E.DisableBackend(l)}return this.backend.enabled=void 0===e.config||!1!==e.config.enabled,new r.SequenceNumberBackend(this.backend)},e}();t.BackendFactory=l},function(e,t,n){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(23),r=n(24),s=n(25),o=n(1),E=n(27),l=n(13),c=function(){function e(e,t,n,i){var s=this;this.licenseCall=t,this.backendBaseUrl=n,this.adapter=i,this.licenseKeyReceived=function(e){clearTimeout(s.licenseLazyLoadingTimeoutHandle),s.unsubscribeFromAdapter(),s.info.key=e.licenseKey,s.promise=s.performLicenseCheck()},this.licenseCallFailed=function(){clearTimeout(s.licenseLazyLoadingTimeoutHandle),s.unsubscribeFromAdapter(),s.backend=new E.NoOpBackend},this.licenseLazyLoadingTimeout=function(){s.unsubscribeFromAdapter(),s.backend=new E.NoOpBackend},this.info=a({},e),this.backend=new r.QueueBackend,this.licenseCall=t,void 0!==e.key&&""!==e.key?this.promise=this.performLicenseCheck():!0===i.supportsDeferredLicenseLoading?(i.onLicenseKeyReceived.subscribe(this.licenseKeyReceived),i.onLicenseCallFailed.subscribe(this.licenseCallFailed),this.licenseLazyLoadingTimeoutHandle=window.setTimeout(this.licenseLazyLoadingTimeout,l.ANALYTICS_LICENSECALL_TIMEOUT)):this.backend=new E.NoOpBackend}return e.prototype.performLicenseCheck=function(){var e=this,t=this.info,n=t.key,a=t.domain,r=t.version;if(!n||""===n){var l={status:i.LicensingResult.Denied,message:"No license key provided"};return this.backend=new E.NoOpBackend,Promise.resolve(l)}return this.licenseCall(n,a,r,this.backendBaseUrl).then(function(t){if(t.status!==i.LicensingResult.Granted)throw new Error(t.message);var a=new s.RemoteBackend(!0,e.backendBaseUrl,n);return e.backend.flushTo(a),e.backend=a,t}).catch(function(t){return o.logger.errorMessageToUser("License Check for Bitmovin Analytics failed because of ",t),e.backend=new E.NoOpBackend,{status:i.LicensingResult.Denied,message:t.message}})},e.prototype.sendRequest=function(e){this.backend.sendRequest(e)},e.prototype.sendUnloadRequest=function(e){this.backend.sendUnloadRequest(e)},e.prototype.sendRequestSynchronous=function(e){this.backend.sendRequestSynchronous(e)},e.prototype.sendAdRequest=function(e){this.backend.sendAdRequest(e)},e.prototype.unsubscribeFromAdapter=function(){this.adapter.onLicenseKeyReceived.unsubscribe(this.licenseKeyReceived),this.adapter.onLicenseCallFailed.unsubscribe(this.licenseCallFailed)},e}();t.LicenseCheckingBackend=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Granted="granted",e.Denied="denied",e.Skip="skip"}(t.LicensingResult||(t.LicensingResult={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){this.queue=[],this.unloadQueue=[],this.syncQueue=[],this.adQueue=[]}return e.prototype.sendRequest=function(e){this.queue.push(e)},e.prototype.sendUnloadRequest=function(e){this.unloadQueue.push(e)},e.prototype.sendRequestSynchronous=function(e){this.syncQueue.push(e)},e.prototype.sendAdRequest=function(e){this.adQueue.push(e)},e.prototype.flushTo=function(e){this.queue.forEach(function(t){e.sendRequest(t)}),this.unloadQueue.forEach(function(t){e.sendUnloadRequest(t)}),this.syncQueue.forEach(function(t){e.sendRequestSynchronous(t)}),this.adQueue.forEach(function(t){e.sendAdRequest(t)})},e}();t.QueueBackend=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(26),i=n(0),r=function(){function e(e,t,n){this.licenseKey=n,this.hasAdModule=e,this.analyticsCall=new a.AnalyticsCall(t)}return e.prototype.sendRequest=function(e){e.key=this.licenseKey,this.analyticsCall.sendRequest(e,i.noOp)},e.prototype.sendUnloadRequest=function(e){e.key=this.licenseKey,this.analyticsCall.sendUnloadRequest(e)},e.prototype.sendRequestSynchronous=function(e){e.key=this.licenseKey,this.analyticsCall.sendRequestSynchronous(e,i.noOp)},e.prototype.sendAdRequest=function(e){e.key=this.licenseKey,this.hasAdModule&&this.analyticsCall.sendAdRequest(e)},e}();t.RemoteBackend=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(12),i=n(0),r=n(0),s=function(){function e(e){this.analyticsServerUrl=i.joinUrls(e,"analytics"),this.adAnalyticsServerUrl=i.joinUrls(e,"analytics/a")}return e.prototype.sendRequest=function(e,t){a.post(this.analyticsServerUrl,e,t)},e.prototype.sendUnloadRequest=function(e){var t=this;this.trySendBeacon(function(e){return t.sendRequestSynchronous(e,r.noOp)},this.getAnalyticsServerUrl(),e)},e.prototype.trySendBeacon=function(e,t,n){void 0===navigator.sendBeacon?e(n):navigator.sendBeacon(t,JSON.stringify(n))||e(n)},e.prototype.sendRequestSynchronous=function(e,t){a.post(this.analyticsServerUrl,e,t,!1)},e.prototype.sendAdRequest=function(e){var t=this;this.trySendBeacon(function(e){return a.post(t.getAdAnalyticsServerUrl(),e,r.noOp)},this.getAdAnalyticsServerUrl(),e)},e.prototype.getAnalyticsServerUrl=function(){return this.analyticsServerUrl},e.prototype.getAdAnalyticsServerUrl=function(){return this.adAnalyticsServerUrl},e}();t.AnalyticsCall=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){}return e.prototype.sendRequest=function(e){},e.prototype.sendUnloadRequest=function(e){},e.prototype.sendRequestSynchronous=function(e){},e.prototype.sendAdRequest=function(e){},e}();t.NoOpBackend=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),i=function(){function e(e,t){this.underlying=t,e.debug&&e.debug.fields&&(this.debugFields=e.debug.fields)}return e.prototype.sendRequest=function(e){this.printFields(e),this.underlying.sendRequest(e)},e.prototype.sendUnloadRequest=function(e){this.printFields(e),this.underlying.sendUnloadRequest(e)},e.prototype.sendRequestSynchronous=function(e){this.printFields(e),this.underlying.sendRequestSynchronous(e)},e.prototype.sendAdRequest=function(e){this.underlying.sendAdRequest(e)},e.prototype.printFields=function(e){if(this.debugFields&&this.debugFields.length){var t={};this.debugFields.forEach(function(n){return t[n]=e[n]}),a.logger.logTable([t])}},e}();t.DebuggingBackend=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.sequenceNumber=0,this.underlying=e}return e.prototype.sendRequest=function(e){this.updateSampleBeforeSending(e),this.underlying.sendRequest(e)},e.prototype.sendUnloadRequest=function(e){this.updateSampleBeforeSending(e),this.underlying.sendUnloadRequest(e)},e.prototype.sendRequestSynchronous=function(e){this.updateSampleBeforeSending(e),this.underlying.sendRequestSynchronous(e)},e.prototype.sendAdRequest=function(e){this.underlying.sendAdRequest(e)},e.prototype.updateSampleBeforeSending=function(e){e.sequenceNumber=this.sequenceNumber++},e}();t.SequenceNumberBackend=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(12),i=n(0);t.LicenseCall=function(e,t,n,r){var s=i.joinUrls(r,"/licensing"),o={analyticsVersion:n,domain:t,key:e};return new Promise(function(e){a.post(s,o,function(t){e(t)})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.innerBackend=e,this._enabled=!0,this.startupInformationSent=!1}return Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled=e},enumerable:!0,configurable:!0}),e.prototype.sendRequest=function(e){this.decorateSampleIfEnabled(e)&&this.innerBackend.sendRequest(e)},e.prototype.sendUnloadRequest=function(e){this._enabled&&this.innerBackend.sendUnloadRequest(e)},e.prototype.sendRequestSynchronous=function(e){this.decorateSampleIfEnabled(e)&&this.innerBackend.sendRequestSynchronous(e)},e.prototype.sendAdRequest=function(e){this._enabled&&this.innerBackend.sendAdRequest(e)},e.prototype.decorateSampleIfEnabled=function(e){return!this.startupInformationSent&&e.playerStartupTime&&e.playerStartupTime>0&&(this.startupInformation={playerStartupTime:e.playerStartupTime,pageLoadTime:e.pageLoadTime},!0===this._enabled)?(this.startupInformationSent=!0,!0):!!this._enabled&&(!this.startupInformationSent&&this.startupInformation&&e.videoStartupTime&&e.videoStartupTime>0&&(this.copyPropertiesToSample(e,this.startupInformation),e.startupTime=(e.playerStartupTime||0)+e.videoStartupTime,this.startupInformationSent=!0),!0)},e.prototype.copyPropertiesToSample=function(e,t){Object.getOwnPropertyNames(t).forEach(function(n){return e[n]=t[n]})},e}();t.DisableBackend=a},function(e,t,n){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(1),s=n(33),o=n(0),E=n(34),l=n(35),c=n(36);!function(e){e.FIRST_QUARTILE="firstQuartile",e.MIDPOINT="midpoint",e.THIRD_QUARTILE="thirdQuartile"}(i||(i={}));var u=function(){function e(e,t){var n=this;this.onBeforeUnLoadEvent=!1,this.adManifestLoadedEvents=[],this.isPlaying=!1,this.adPodPosition=0,this.analytics=e,this.adapter=t,this.adapter.adCallbacks.onAdStarted=function(e){return n.onAdStarted(e)},this.adapter.adCallbacks.onAdFinished=function(e){return n.onAdFinished(e)},this.adapter.adCallbacks.onAdBreakStarted=function(e){return n.onAdBreakStarted(e)},this.adapter.adCallbacks.onAdBreakFinished=function(e){return n.onAdBreakFinished(e)},this.adapter.adCallbacks.onAdClicked=function(e){return n.onAdClicked(e)},this.adapter.adCallbacks.onAdError=function(e){return n.onAdError(e)},this.adapter.adCallbacks.onAdManifestLoaded=function(e){return n.onAdManifestLoaded(e)},this.adapter.adCallbacks.onPlay=function(){return n.onPlay()},this.adapter.adCallbacks.onPause=function(){return n.onPause()},this.adapter.adCallbacks.onBeforeUnload=function(){return n.onBeforeUnload()},this.adapter.adCallbacks.onAdSkipped=function(e){return n.onAdSkipped(e)},this.adapter.adCallbacks.onAdQuartile=function(e){return n.onAdQuartile(e)},this.viewportTracker=new E.ViewportTracker(this.adapter.getContainer(),function(){return n.onIntersectionChanged()},.5)}return e.prototype.onIntersectionChanged=function(){this.activeAdSample&&(this.isContainerInViewport()?this.enterViewportTimestamp=o.getCurrentTimestamp():this.enterViewportTimestamp&&(this.activeAdSample.timeInViewport=(this.activeAdSample.timeInViewport||0)+o.getCurrentTimestamp()-this.enterViewportTimestamp))},e.prototype.isContainerInViewport=function(){return!this.viewportTracker||this.viewportTracker.isInViewport()},e.prototype.onPlay=function(){if(this.adapter&&this.adapter.isLinearAdActive()&&this.activeAdSample){var e=o.getCurrentTimestamp();this.beginPlayingTimestamp=e,this.enterViewportTimestamp=e,this.isPlaying=!0}},e.prototype.onPause=function(){this.adapter&&this.adapter.isLinearAdActive()&&this.activeAdSample&&(this.updatePlayingTime(this.activeAdSample),this.isPlaying=!1)},e.prototype.onAdManifestLoaded=function(e){var t=e.adConfig;t&&t.tag&&"vmap"===t.tag.type?this.sendAnalyticsRequest(new c.AdBreakSample(e.adConfig,e)):e.adBreak&&this.adManifestLoadedEvents.push(e)},e.prototype.onAdBreakStarted=function(e){this.adPodPosition=0,this.activeAdBreakSample=new c.AdBreakSample(e.adBreak,this.getAdManifestLoadedEvent(e.adBreak)),this.adStartupTimestamp=o.getCurrentTimestamp()},e.prototype.onAdBreakFinished=function(e){this.resetActiveAd(),this.activeAdBreakSample=void 0},e.prototype.onAdStarted=function(e){e.ad.isLinear&&(this.resetActiveAd(),this.activeAdSample=new s.AdSample(e.ad),this.currentTime=void 0,this.activeAdSample.adStartupTime=this.adStartupTimestamp?o.getCurrentTimestamp()-this.adStartupTimestamp:void 0,this.startAd(this.activeAdSample))},e.prototype.onAdFinished=function(e){if(this.activeAdBreakSample&&this.activeAdSample){var t=a({},this.activeAdSample);t.completed=1,this.resetActiveAd(),this.completeAd(this.activeAdBreakSample,t,t.adDuration)}},e.prototype.onAdSkipped=function(e){if(this.activeAdBreakSample&&this.activeAdSample){var t=a({},this.activeAdSample);t.skipped=1,t.skipPosition=this.currentTime,t.skipPercentage=o.calculatePercentage(this.activeAdSample.skipPosition,this.activeAdSample.adDuration),this.resetActiveAd(),this.completeAd(this.activeAdBreakSample,t,t.skipPosition)}},e.prototype.onAdError=function(e){var t,n,a=this,i=e.data||{adBreak:void 0,adConfig:void 0,code:void 0,message:void 0},r=i.adConfig,s=i.adBreak,E=i.code,l=i.message,u=new c.AdBreakSample(s||r,s?this.getAdManifestLoadedEvent(s):void 0);u.errorCode=E||e.code,u.errorData=JSON.stringify(e.data),u.errorMessage=l||e.name,this.activeAdSample&&s&&s.ads&&s.ads.includes(function(e){return e.id===a.activeAdSample.adId})&&(n=(t=this.activeAdSample).errorPosition=this.currentTime,t.errorPercentage=o.calculatePercentage(t.errorPosition,t.adDuration)),this.completeAd(u,t,n)},e.prototype.onAdLinearityChanged=function(e){},e.prototype.onAdClicked=function(e){this.activeAdSample&&(this.activeAdSample.adClickthroughUrl=e.clickThroughUrl,this.activeAdSample.clicked=1,this.activeAdSample.clickPosition=this.currentTime,this.activeAdSample.clickPercentage=o.calculatePercentage(this.activeAdSample.clickPosition,this.activeAdSample.adDuration))},e.prototype.onAdQuartile=function(e){this.activeAdSample&&(e.quartile===i.FIRST_QUARTILE?this.activeAdSample.quartile1=1:e.quartile===i.MIDPOINT?this.activeAdSample.midpoint=1:e.quartile===i.THIRD_QUARTILE&&(this.activeAdSample.quartile3=1))},e.prototype.onBeforeUnload=function(){if(!this.onBeforeUnLoadEvent&&(this.onBeforeUnLoadEvent=!0,this.activeAdSample&&this.activeAdBreakSample)){var e=a({},this.activeAdSample);e.closed=1,e.closePosition=this.currentTime,e.closePercentage=o.calculatePercentage(e.closePosition,e.adDuration),this.resetActiveAd(),this.completeAd(this.activeAdBreakSample,e,e.closePosition)}},e.prototype.createNewAdAnalyticsSample=function(e){var t=this.adapter.getAdModuleInfo();return a({},new l.AdAnalyticsSample(e),{analyticsVersion:"v2.5.4",adModule:t.name,adModuleVersion:t.version,playerStartupTime:this.analytics.playerStartupTime,pageLoadTime:this.analytics.pageLoadTime,autoplay:this.analytics.autoplay,pageLoadType:o.getPageLoadType()})},e.prototype.getAdManifestLoadedEvent=function(e){if(e)return this.adManifestLoadedEvents.find(function(t){return t.adBreak&&t.adBreak.id===e.id})},e.prototype.sendAnalyticsRequest=function(e,t){var n=a({},this.createNewAdAnalyticsSample(this.analytics.sample),e,t||new s.AdSample);n.time=o.getCurrentTimestamp(),n.adImpressionId=o.generateUUID(),n.percentageInViewport=o.calculatePercentage(n.timeInViewport,n.timePlayed),this.analytics.backend.sendAdRequest(n)},e.prototype.updatePlayingTime=function(e){var t=o.getCurrentTimestamp();this.beginPlayingTimestamp&&this.isPlaying&&(void 0!==e.timePlayed&&(e.timePlayed+=t-this.beginPlayingTimestamp),this.isContainerInViewport()&&this.enterViewportTimestamp&&void 0!==e.timeInViewport&&(e.timeInViewport+=t-this.enterViewportTimestamp))},e.prototype.startAd=function(t){var n=this;t.started=1,t.timePlayed=0,t.timeInViewport=0,t.adPodPosition=this.adPodPosition;var a=o.getCurrentTimestamp();this.beginPlayingTimestamp=a,this.enterViewportTimestamp=this.isContainerInViewport()?a:void 0,this.isPlaying=!0,this.currentTime=0,this.adPodPosition++,this.currentTimeInterval=window.setInterval(function(){try{t&&void 0!==t.adDuration&&t.adDuration>0&&n.adapter.isLinearAdActive()&&(n.currentTime=o.calculateTime(Math.max(n.adapter.currentTime(),0)))}catch(e){r.logger.log("AdStarted monitoring interval failed and got cleared",e),n.resetActiveAd()}},e.TIMEOUT_CURRENT_TIME_INTERVAL)},e.prototype.completeAd=function(e,t,n){void 0===t&&(t=new s.AdSample),t.exitPosition=n,t.playPercentage=o.calculatePercentage(t.exitPosition,t.adDuration),this.adStartupTimestamp=o.getCurrentTimestamp(),this.updatePlayingTime(t),this.isPlaying=!1,this.sendAnalyticsRequest(e,t)},e.prototype.resetActiveAd=function(){window.clearInterval(this.currentTimeInterval),this.currentTime=void 0,this.activeAdSample=void 0},e.MODULE_NAME="ads",e.TIMEOUT_CURRENT_TIME_INTERVAL=100,e}();t.AdAnalytics=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=function(){function e(t){if(this.clicked=0,this.closed=0,this.completed=0,this.midpoint=0,this.quartile1=0,this.quartile3=0,this.skipped=0,this.started=0,t){this.adClickthroughUrl=t.clickThroughUrl,this.adId=t.id,this.mediaUrl=t.mediaFileUrl;var n=a.getHostnameAndPathFromUrl(this.mediaUrl||"");this.mediaPath=n.path,this.mediaServer=n.hostname,this.isLinear=t.isLinear,this.adPlaybackHeight=t.height,this.adPlaybackWidth=t.width,t.data&&(this.videoBitrate=void 0===t.data.bitrate?void 0:1e3*t.data.bitrate,this.streamFormat=t.data.mimeType);var i=t.data;i&&(i.adSystem&&(this.adSystem=i.adSystem.name),i.advertiser&&(this.advertiserName=i.advertiser.name),this.apiFramework=i.apiFramework,i.creative&&(this.creativeAdId=i.creative.adId,this.creativeId=i.creative.id,i.creative.universalAdId&&(this.universalAdIdRegistry=i.creative.universalAdId.idRegistry,this.universalAdIdValue=i.creative.universalAdId.value)),this.adDescription=i.adDescription,this.minSuggestedDuration=a.calculateTimeWithUndefined(i.minSuggestedDuration),i.survey&&(this.surveyUrl=i.survey.uri),this.adTitle=i.adTitle,this.wrapperAdsCount=i.wrapperAdIds?i.wrapperAdIds.length:0)}var r=t;r&&(this.adSkippableAfter=e.parseSkipAfter(r.skippableAfter),this.adSkippable=r.skippable||(void 0===this.adSkippableAfter?void 0:this.adSkippableAfter>=0),this.adDuration=a.calculateTime(r.duration))}return e.parseSkipAfter=function(e){if(void 0!==e)return-1===e?e:a.calculateTime(e)},e}();t.AdSample=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(1),r=function(){function e(e,t,n){var r=this;void 0===n&&(n=1),this.inViewport=void 0,this.threshold=n,this.onIntersectionChanged=t,this.element=e;try{var s={root:null,rootMargin:"0px",threshold:n};this.observer=new IntersectionObserver(function(e,t){return r.handleIntersect(e,t)},s),this.observer.observe(e)}catch(e){i.logger.log("Couldn't create instance of IntersectionObserver. timeInViewport will always be reported as 100%.")}this.hidden=a.getHiddenProp(),this.hidden&&(this.visibilityChange=this.hidden.replace("hidden","")+"visibilitychange",document.addEventListener(this.visibilityChange,this.handleVisibilityChange=this.handleVisibilityChange.bind(this),!1))}return e.prototype.isHidden=function(){return this.hidden&&document[this.hidden]},e.prototype.isInViewport=function(){return!this.isHidden()&&(null==this.inViewport||this.inViewport)},e.prototype.dispose=function(){this.observer&&(this.observer.unobserve(this.element),this.observer.disconnect()),this.visibilityChange&&document.removeEventListener(this.visibilityChange,this.handleVisibilityChange,!1)},e.prototype.handleVisibilityChange=function(){this.onIntersectionChanged()},e.prototype.handleIntersect=function(e,t){var n=this;e.forEach(function(e){e.target===n.element&&(n.inViewport=!(e.intersectionRatio<n.threshold))}),this.onIntersectionChanged()},e}();t.ViewportTracker=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){return function(e){this.platform="web",e&&(this.videoImpressionId=e.impressionId,this.userAgent=e.userAgent,this.language=e.language,this.cdnProvider=e.cdnProvider,this.customData1=e.customData1,this.customData2=e.customData2,this.customData3=e.customData3,this.customData4=e.customData4,this.customData5=e.customData5,this.customUserId=e.customUserId,this.domain=e.domain,this.experimentName=e.experimentName,this.key=e.key,this.path=e.path,this.player=e.player,this.playerKey=e.playerKey,this.playerTech=e.playerTech,this.screenHeight=e.screenHeight,this.screenWidth=e.screenWidth,this.version=e.version,this.size=e.size,this.userId=e.userId,this.videoId=e.videoId,this.videoTitle=e.videoTitle,this.videoWindowHeight=e.videoWindowHeight,this.videoWindowWidth=e.videoWindowWidth,this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec)}}();t.AdAnalyticsSample=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=function(){return function(e,t){this.adFallbackIndex=0,t&&(this.manifestDownloadTime=a.calculateTime(t.downloadTiming.downloadTime)),e&&(this.adReplaceContentDuration=a.calculateTimeWithUndefined(e.replaceContentDuration),this.adFallbackIndex=(e.currentFallbackIndex||-1)+1);var n=e;n&&("pre"===n.position||"post"===n.position?this.adPosition=n.position:(this.adPosition="mid",this.adOffset=n.position),this.adPreloadOffset=a.calculateTimeWithUndefined(n.preloadOffset));var i=e;if(i){this.adIsPersistent=i.persistent;var r=i.tag;if(this.adFallbackIndex>0&&i.fallbackTags&&i.fallbackTags.length>=this.adFallbackIndex&&(r=i.fallbackTags[this.adFallbackIndex-1]),r&&(this.adTagType=r.type,this.adTagUrl=r.url),this.adTagUrl){var s=a.getHostnameAndPathFromUrl(this.adTagUrl);this.adTagServer=s.hostname,this.adTagPath=s.path}}var o=e;o&&(this.adScheduleTime=a.calculateTimeWithUndefined(o.scheduleTime),this.adIdPlayer=o.id)}}();t.AdBreakSample=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={avc:['video/mp4; codecs="avc1.42000a"'],vp9:['video/mp4; codecs="vp09.00.50.08"'],av1:['video/mp4; codecs="av01.0.08M.08"'],hevc:['video/mp4; codecs="hev1.1.6.L93.B0"']},i=function(){function e(){}return Object.defineProperty(e,"supportedVideoFormats",{get:function(){var e=this;return Object.getOwnPropertyNames(a).filter(function(t){return a[t].some(function(t){return e.isCodecSupported(t)})})},enumerable:!0,configurable:!0}),e.isCodecSupported=function(e){return MediaSource.isTypeSupported(e)},e}();t.CodecHelper=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=function(){function e(e){var t=e.config;this._cookiesEnabled=null==t||!1!==t.cookiesEnabled,this._userId=this.setupUserId()}return Object.defineProperty(e.prototype,"cookiesEnabled",{get:function(){return this._cookiesEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return this._userId},enumerable:!0,configurable:!0}),e.prototype.createAndSetNewUserId=function(){var e=a.generateUUID();return this.writeCookie(e),e},e.prototype.writeCookie=function(e){!0===this.cookiesEnabled&&(document.cookie="bitmovin_analytics_uuid="+e)},e.prototype.setupUserId=function(){var e=a.getCookie("bitmovin_analytics_uuid");return a.isNullOrEmptyString(e)&&(e=this.createAndSetNewUserId()),e},e}();t.SessionPersistenceHandler=i},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),s=n(2),o=n(6),E=function(e){function t(t,n){var a=e.call(this,null,n)||this;return a.hls=t,a.getPlayerName=function(){return s.Player.HLSJS},a.getPlayerVersion=function(){return a.hls.constructor.version},a.isLive=function(){var e=a.hls;if(e.currentLevel<0)return!1;var t=e.levels[e.currentLevel];return!!t&&t.details.live},a.resetMedia(),a.registerHlsEvents(),a}return i(t,e),t.prototype.getCurrentQualityLevelInfo=function(){if(!this.hls.levels)return null;var e=this.hls.levels[this.hls.currentLevel];return e?{bitrate:e.bitrate,width:e.width,height:e.height}:null},t.prototype.getMIMEType=function(){return o.MIMETypes.HLS},t.prototype.getStreamURL=function(){return this.hls.url},t.prototype.registerHlsEvents=function(){var e=this.hls;e.on(e.constructor.Events.MEDIA_ATTACHING,this.onMediaAttaching.bind(this)),e.on(e.constructor.Events.MEDIA_DETACHING,this.onMediaDetaching.bind(this)),e.on(e.constructor.Events.MANIFEST_LOADING,this.onManifestLoading.bind(this)),e.media&&(this.onMediaAttaching(),this.onManifestLoading())},t.prototype.onMediaAttaching=function(){this.mediaElement||(this.mediaElement=this.hls.media,this.registerMediaElement(),this.onMaybeReady())},t.prototype.onMediaDetaching=function(){this.unregisterMediaElement()},t.prototype.onManifestLoading=function(){this.onMaybeReady()},t}(r.HTML5InternalAdapter);t.HlsInternalAdapter=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){this.callbacks=[]}return e.prototype.subscribe=function(e){var t=this;return this.callbacks.push(e),function(){return t.unsubscribe(e)}},e.prototype.dispatch=function(e){this.callbacks.slice(0).forEach(function(t){t(e)})},e.prototype.unsubscribe=function(e){var t=this.callbacks.indexOf(e);t>-1&&this.callbacks.splice(t,1)},Object.defineProperty(e.prototype,"subscriberCount",{get:function(){return this.callbacks.length},enumerable:!0,configurable:!0}),e}();t.EventDispatcher=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=n(1),r=n(1),s=n(10),o=n(3);!function(e){e.SETUP="SETUP",e.STARTUP="STARTUP",e.READY="READY",e.PLAYING="PLAYING",e.REBUFFERING="REBUFFERING",e.PAUSE="PAUSE",e.QUALITYCHANGE="QUALITYCHANGE",e.PAUSED_SEEKING="PAUSED_SEEKING",e.QUALITYCHANGE_PAUSE="QUALITYCHANGE_PAUSE",e.QUALITYCHANGE_REBUFFERING="QUALITYCHANGE_REBUFFERING",e.END="END",e.ERROR="ERROR",e.MUTING_READY="MUTING_READY",e.MUTING_PLAY="MUTING_PLAY",e.MUTING_PAUSE="MUTING_PAUSE",e.CASTING="CASTING"}(a||(a={}));var E=function(){function e(e,t){var n=this;this.sourceChange=function(e,t,a){n.callEvent(o.Event.MANUAL_SOURCE_CHANGE,{config:e,currentTime:a},t)},this.stateMachineCallbacks=e,this.onEnterStateTimestamp=0,this.seekStartedAt=null,this.states=a,this.createStateMachine(t)}return e.prototype.getAllStates=function(){var e=this;return Object.keys(this.states).map(function(t){return e.states[t]}).concat(["FINISH_QUALITYCHANGE_PAUSE","FINISH_QUALITYCHANGE","FINISH_QUALITYCHANGE_REBUFFERING"])},e.prototype.createStateMachine=function(e){var t=this;this.stateMachine=s.create({initial:this.states.SETUP,error:function(e,t,n,a,r,s){i.logger.error("Error in statemachine: "+s)},events:[{name:o.Event.TIMECHANGED,from:this.states.SETUP,to:this.states.SETUP},{name:o.Event.READY,from:[this.states.SETUP,this.states.ERROR],to:this.states.READY},{name:o.Event.PLAY,from:this.states.READY,to:this.states.STARTUP},{name:o.Event.START_BUFFERING,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.END_BUFFERING,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.VIDEO_CHANGE,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.AUDIO_CHANGE,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.TIMECHANGED,from:this.states.STARTUP,to:this.states.PLAYING},{name:o.Event.TIMECHANGED,from:this.states.PLAYING,to:this.states.PLAYING},{name:o.Event.TIMECHANGED,from:this.states.PAUSE,to:this.states.PAUSE},{name:o.Event.TIMECHANGED,from:this.states.PAUSE,to:this.states.PAUSE},{name:o.Event.SEEKED,from:this.states.PAUSE,to:this.states.PAUSE},{name:o.Event.END_BUFFERING,from:this.states.PLAYING,to:this.states.PLAYING},{name:o.Event.START_BUFFERING,from:this.states.PLAYING,to:this.states.REBUFFERING},{name:o.Event.START_BUFFERING,from:this.states.REBUFFERING,to:this.states.REBUFFERING},{name:o.Event.PLAY,from:this.states.REBUFFERING,to:this.states.PLAYING},{name:o.Event.TIMECHANGED,from:this.states.REBUFFERING,to:this.states.PLAYING},{name:o.Event.SEEK,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.PLAY,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.PAUSE,from:this.states.PLAYING,to:this.states.PAUSE},{name:o.Event.PAUSE,from:this.states.REBUFFERING,to:this.states.PAUSE},{name:o.Event.PLAY,from:this.states.PAUSE,to:this.states.PLAYING},{name:o.Event.TIMECHANGED,from:this.states.PAUSE,to:this.states.PLAYING},{name:o.Event.VIDEO_CHANGE,from:this.states.PLAYING,to:this.states.QUALITYCHANGE},{name:o.Event.AUDIO_CHANGE,from:this.states.PLAYING,to:this.states.QUALITYCHANGE},{name:o.Event.VIDEO_CHANGE,from:this.states.QUALITYCHANGE,to:this.states.QUALITYCHANGE},{name:o.Event.AUDIO_CHANGE,from:this.states.QUALITYCHANGE,to:this.states.QUALITYCHANGE},{name:"FINISH_QUALITYCHANGE",from:this.states.QUALITYCHANGE,to:this.states.PLAYING},{name:o.Event.VIDEO_CHANGE,from:this.states.PAUSE,to:this.states.QUALITYCHANGE_PAUSE},{name:o.Event.AUDIO_CHANGE,from:this.states.PAUSE,to:this.states.QUALITYCHANGE_PAUSE},{name:o.Event.VIDEO_CHANGE,from:this.states.QUALITYCHANGE_PAUSE,to:this.states.QUALITYCHANGE_PAUSE},{name:o.Event.AUDIO_CHANGE,from:this.states.QUALITYCHANGE_PAUSE,to:this.states.QUALITYCHANGE_PAUSE},{name:"FINISH_QUALITYCHANGE_PAUSE",from:this.states.QUALITYCHANGE_PAUSE,to:this.states.PAUSE},{name:o.Event.SEEK,from:this.states.PAUSE,to:this.states.PAUSED_SEEKING},{name:o.Event.SEEK,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.AUDIO_CHANGE,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.VIDEO_CHANGE,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.START_BUFFERING,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.END_BUFFERING,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.SEEKED,from:this.states.PAUSED_SEEKING,to:this.states.PAUSE},{name:o.Event.TIMECHANGED,from:this.states.PAUSED_SEEKING,to:this.states.PLAYING},{name:o.Event.PAUSE,from:this.states.PAUSED_SEEKING,to:this.states.PAUSE},{name:o.Event.END,from:this.states.PAUSED_SEEKING,to:this.states.END},{name:o.Event.END,from:this.states.PLAYING,to:this.states.END},{name:o.Event.END,from:this.states.PAUSE,to:this.states.END},{name:o.Event.SEEK,from:this.states.END,to:this.states.END},{name:o.Event.SEEKED,from:this.states.END,to:this.states.END},{name:o.Event.TIMECHANGED,from:this.states.END,to:this.states.END},{name:o.Event.END_BUFFERING,from:this.states.END,to:this.states.END},{name:o.Event.START_BUFFERING,from:this.states.END,to:this.states.END},{name:o.Event.END,from:this.states.END,to:this.states.END},{name:o.Event.SEEKED,from:this.states.PLAYING,to:this.states.PLAYING},{name:o.Event.SEEK,from:this.states.PLAYING,to:this.states.PLAYING},{name:o.Event.PLAY,from:this.states.END,to:this.states.PLAYING},{name:o.Event.ERROR,from:this.getAllStates(),to:this.states.ERROR},{name:o.Event.PAUSE,from:this.states.ERROR,to:this.states.ERROR},{name:o.Event.UNLOAD,from:this.getAllStates(),to:this.states.END},{name:o.Event.START_AD,from:this.states.PLAYING,to:this.states.AD},{name:o.Event.END_AD,from:this.states.AD,to:this.states.PLAYING},{name:o.Event.MUTE,from:this.states.READY,to:this.states.MUTING_READY},{name:o.Event.UN_MUTE,from:this.states.READY,to:this.states.MUTING_READY},{name:"FINISH_MUTING",from:this.states.MUTING_READY,to:this.states.READY},{name:o.Event.MUTE,from:this.states.PLAYING,to:this.states.MUTING_PLAY},{name:o.Event.UN_MUTE,from:this.states.PLAYING,to:this.states.MUTING_PLAY},{name:"FINISH_MUTING",from:this.states.MUTING_PLAY,to:this.states.PLAYING},{name:o.Event.MUTE,from:this.states.PAUSE,to:this.states.MUTING_PAUSE},{name:o.Event.UN_MUTE,from:this.states.PAUSE,to:this.states.MUTING_PAUSE},{name:"FINISH_MUTING",from:this.states.MUTING_PAUSE,to:this.states.PAUSE},{name:o.Event.START_CAST,from:[this.states.READY,this.states.PAUSE],to:this.states.CASTING},{name:o.Event.PAUSE,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.PLAY,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.TIMECHANGED,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.MUTE,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.SEEK,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.SEEKED,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.END_CAST,from:this.states.CASTING,to:this.states.READY},{name:o.Event.SEEK,from:this.states.READY,to:this.states.READY},{name:o.Event.SEEKED,from:this.states.READY,to:this.states.READY},{name:o.Event.SEEKED,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.SOURCE_LOADED,from:this.getAllStates(),to:this.states.SETUP},{name:o.Event.MANUAL_SOURCE_CHANGE,from:this.getAllStates(),to:this.states.SOURCE_CHANGING},{name:o.Event.VIDEO_CHANGE,from:this.states.REBUFFERING,to:this.states.QUALITYCHANGE_REBUFFERING},{name:o.Event.AUDIO_CHANGE,from:this.states.REBUFFERING,to:this.states.QUALITYCHANGE_REBUFFERING},{name:o.Event.VIDEO_CHANGE,from:this.states.QUALITYCHANGE_REBUFFERING,to:this.states.QUALITYCHANGE_REBUFFERING},{name:o.Event.AUDIO_CHANGE,from:this.states.QUALITYCHANGE_REBUFFERING,to:this.states.QUALITYCHANGE_REBUFFERING},{name:"FINISH_QUALITYCHANGE_REBUFFERING",from:this.states.QUALITYCHANGE_REBUFFERING,to:this.states.REBUFFERING}],callbacks:{onenterstate:function(n,a,s,E,l){"none"===a&&e.starttime?t.onEnterStateTimestamp=e.starttime:t.onEnterStateTimestamp=E||(new Date).getTime(),i.logger.log("[ENTER] "+r.padRight(s,20)+"EVENT: "+r.padRight(n,20)+" from "+r.padRight(a,14)),l&&s!==t.states.PAUSED_SEEKING&&t.stateMachineCallbacks.setVideoTimeStartFromEvent(l),n===o.Event.START_CAST&&s===t.states.CASTING&&t.stateMachineCallbacks.startCasting(E,l)},onafterevent:function(e,n,a,i){a===t.states.QUALITYCHANGE&&t.stateMachine.FINISH_QUALITYCHANGE(i),a!==t.states.MUTING_READY&&a!==t.states.MUTING_PLAY&&a!==t.states.MUTING_PAUSE||t.stateMachine.FINISH_MUTING(i)},onleavestate:function(e,n,a,r,s){if(r){var E=r-t.onEnterStateTimestamp;s&&a!==t.states.PAUSED_SEEKING&&t.stateMachineCallbacks.setVideoTimeEndFromEvent(s);var l=String(n).toLowerCase();if(n===t.states.PAUSED_SEEKING){var c=r-t.seekStartedAt;t.seekStartedAt=null,t.stateMachineCallbacks[l](c,l,s)}else if(e===o.Event.UNLOAD&&n===t.states.PLAYING)t.stateMachineCallbacks.playingAndBye(E,l,s);else if(n===t.states.PAUSE&&a!==t.states.PAUSED_SEEKING)t.stateMachineCallbacks.setVideoTimeStartFromEvent(e),t.stateMachineCallbacks.pause(E,l,s);else{var u=t.stateMachineCallbacks[l];"function"==typeof u?u(E,l,s):i.logger.error("Could not find callback function for "+l)}s&&a!==t.states.PAUSED_SEEKING&&t.stateMachineCallbacks.setVideoTimeStartFromEvent(s),e===o.Event.VIDEO_CHANGE?t.stateMachineCallbacks.videoChange(s):e===o.Event.AUDIO_CHANGE?t.stateMachineCallbacks.audioChange(s):e===o.Event.MUTE?t.stateMachineCallbacks.mute():e===o.Event.UN_MUTE?t.stateMachineCallbacks.unMute():e===o.Event.MANUAL_SOURCE_CHANGE&&t.stateMachineCallbacks.manualSourceChange(s)}},onseek:function(e,n,a,i){t.seekStartedAt=t.seekStartedAt||i},ontimechanged:function(e,n,a,i,r){var s=i-t.onEnterStateTimestamp;s>59700&&(t.stateMachineCallbacks.setVideoTimeEndFromEvent(r),t.stateMachineCallbacks.heartbeat(s,String(n).toLowerCase(),r),t.onEnterStateTimestamp=i,t.stateMachineCallbacks.setVideoTimeStartFromEvent(r))},onplayerError:function(e,n,a,i,r){t.stateMachineCallbacks.error(r)},metadataLoaded:function(){t.updateMetadata()}}})},e.prototype.callEvent=function(e,t,n){var a=this.stateMachine[e];a?a.call(this.stateMachine,n,t):i.logger.log("Ignored Event: "+e)},e.prototype.updateMetadata=function(){this.stateMachineCallbacks.updateSample()},e}();t.HTML5AnalyticsStateMachine=E},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),s=n(5),o=n(43),E=function(e){function t(t,n){var a=e.call(this)||this,i=t.getConfig(),s=i.analytics;return void 0===s&&(s={}),s.playerKey=s.playerKey||i.key,a.internalAdapter=new o.Bitmovin8InternalAdapter(t,n),a.analytics=new r.Analytics(s,t,a.internalAdapter),t.analytics=a.analytics,a.wrapPlayerLoad(t,a.analytics),a}return i(t,e),t.prototype.wrapPlayerLoad=function(e,t){var n=e.load;e.load=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];if(a.length>0){var r=a[0].analytics;t.sourceChange(r)}return n.apply(e,a)}},t}(s.Adapter);t.Bitmovin8Adapter=E},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s,o=n(9),E=n(44),l=n(2),c=n(16),u=n(3),d=n(7),m=n(45),A=n(47),h=n(50),p=n(51),f=n(52),v=n(53);!function(e){e.Inline="inline",e.Fullscreen="fullscreen",e.PictureInPicture="pictureinpicture"}(s||(s={}));var N=function(e){function t(t,n){var a=e.call(this,n)||this;return a.player=t,a._drmPerformanceInfo={drmUsed:!1},a.onBeforeUnLoadEvent=!1,a.getPlayerVersion=function(){return a.player.version},a.getPlayerName=function(){return l.Player.BITMOVIN},a.getPlayerTech=function(){return a.player.getPlayerType()},a.stateMachine=new E.Bitmovin8AnalyticsStateMachine(a.stateMachineCallbacks,a.opts),a.register(),a.speedMeter=new h.Bitmovin8SpeedMeterAdapter(t,new A.DownloadSpeedMeter).getDownloadSpeedMeter(),a.segmentTracker=new f.Bitmovin8SegmentTrackerAdapter(t,new p.SegmentTracker).getSegmentTracker(),a}return i(t,e),Object.defineProperty(t.prototype,"drmPerformanceInfo",{get:function(){return this._drmPerformanceInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"downloadSpeedInfo",{get:function(){return this.speedMeter.getInfo()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"segments",{get:function(){return this.segmentTracker.getSegments()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"adModule",{get:function(){return this._adModule},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"supportsDeferredLicenseLoading",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.clearValues=function(){this.speedMeter.reset()},t.prototype.clearSegments=function(){this.segmentTracker.reset()},t.prototype.getAutoPlay=function(){return this.player.getConfig().playback&&this.player.getConfig().playback.autoplay||!1},t.prototype.getCurrentPlaybackInfo=function(){var t,n=this,a={},i=this.player.getSource();if(i){var o=c.getSourceInfoFromBitmovinSourceConfig(i.progressive,this.player);a.videoTitle=i.title,a.mpdUrl=i.dash,a.m3u8Url=i.hls,a.progUrl=o.progUrl,a.progBitrate=o.progBitrate}this.player.subtitles&&(t=this.player.subtitles.list().find(function(e){return!0===e.enabled}));var E=r({},e.prototype.getCommonPlaybackInfo.call(this),{size:this.player.getViewMode()===s.Fullscreen?d.PlayerSize.Fullscreen:d.PlayerSize.Window,playerTech:this.getPlayerTech(),isLive:this.player.isLive(),videoDuration:this.player.getDuration(),streamFormat:this.player.getStreamType(),videoWindowWidth:this.player.getContainer().offsetWidth,videoWindowHeight:this.player.getContainer().offsetHeight,isMuted:this.player.isMuted(),isCasting:this.player.isCasting(),audioLanguage:null!=this.player.getAudio()?this.player.getAudio().lang:null,subtitleEnabled:null!=t,subtitleLanguage:null!=t?t.lang:null,droppedFrames:null!=n.player.getSource()?n.player.getDroppedVideoFrames():0},a),l=this.player.getPlaybackVideoData();E.videoBitrate=l.bitrate,E.videoPlaybackHeight=l.height,E.videoPlaybackWidth=l.width,E.videoCodec=l.codec,"progressive"===E.streamFormat&&(E.videoBitrate=a.progBitrate);var u=this.player.getPlaybackAudioData();return E.audioBitrate=u.bitrate,E.audioCodec=u.codec,E},t.prototype.register=function(){var e=this;this.player.on(this.player.exports.PlayerEvent.SourceUnloaded,function(t){e.segmentTracker.reset(),e.eventCallback(u.Event.SOURCE_UNLOADED,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.SourceLoaded,function(t){e.eventCallback(u.Event.SOURCE_LOADED,{})}),this.player.on(this.player.exports.PlayerEvent.CastStarted,function(t){e.eventCallback(u.Event.START_CAST,t)}),this.player.on(this.player.exports.PlayerEvent.CastStopped,function(){e.eventCallback(u.Event.END_CAST,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.Play,function(t){"ui-seek"!==t.issuer&&e.eventCallback(u.Event.PLAY,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.Playing,function(){e.eventCallback(u.Event.PLAYING,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.Paused,function(t){"ui-seek"!==t.issuer&&e.eventCallback(u.Event.PAUSE,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.TimeChanged,function(){e.eventCallback(u.Event.TIMECHANGED,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.Seek,function(){e.eventCallback(u.Event.SEEK,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.Seeked,function(){e.eventCallback(u.Event.SEEKED,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.StallStarted,function(){e.eventCallback(u.Event.START_BUFFERING,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.StallEnded,function(){e.eventCallback(u.Event.END_BUFFERING,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.AudioPlaybackQualityChanged,function(){var t=e.player.getPlaybackAudioData();e.eventCallback(u.Event.AUDIO_CHANGE,{bitrate:t.bitrate,currentTime:e.player.getCurrentTime(),codec:t.codec})}),this.player.on(this.player.exports.PlayerEvent.VideoPlaybackQualityChanged,function(){var t=e.player.getPlaybackVideoData();e.eventCallback(u.Event.VIDEO_CHANGE,{width:t.width,height:t.height,bitrate:t.bitrate,currentTime:e.player.getCurrentTime(),codec:t.codec})}),this.player.on(this.player.exports.PlayerEvent.ViewModeChanged,function(t){"fullscreen"===t.to?e.eventCallback(u.Event.START_FULLSCREEN,{currentTime:e.player.getCurrentTime()}):"fullscreen"===t.from&&e.eventCallback(u.Event.END_FULLSCREEN,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.AdStarted,function(t){e.eventCallback(u.Event.START_AD,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.AdFinished,function(t){e.eventCallback(u.Event.END_AD,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.Muted,function(){e.eventCallback(u.Event.MUTE,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.Unmuted,function(){e.eventCallback(u.Event.UN_MUTE,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.AdSkipped,function(t){e.eventCallback(u.Event.END_AD,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.Error,function(t){e.eventCallback(u.Event.ERROR,{code:t.code,message:t.name,data:t.data,currentTime:e.player.getCurrentTime()}),t.code!==v.ErrorCode.BitmovinPlayerLicensingError&&t.code!==v.ErrorCode.SetupMissingLicenseWhitelist||e._onLicenseCallFailed.dispatch({})}),this.player.on(this.player.exports.PlayerEvent.PlaybackFinished,function(){e.eventCallback(u.Event.PLAYBACK_FINISHED,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.DownloadFinished,function(t){0===t.downloadType.indexOf("drm/license/")&&(e.drmPerformanceInfo.drmTime=1e3*t.downloadTime,e.drmPerformanceInfo.drmInfo=t.downloadType.replace("drm/license/",""),e.drmPerformanceInfo.drmUsed=!0)}),this.player.on(this.player.exports.PlayerEvent.AudioChanged,function(t){e.eventCallback(u.Event.AUDIOTRACK_CHANGED,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.SubtitleEnabled,function(t){e.eventCallback(u.Event.SUBTITLE_CHANGE,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.SubtitleDisabled,function(t){e.eventCallback(u.Event.SUBTITLE_CHANGE,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.LicenseValidated,function(t){t.data.analytics&&void 0!==t.data.analytics.key?e._onLicenseKeyReceived.dispatch({licenseKey:t.data.analytics.key}):e._onLicenseCallFailed.dispatch({})}),window.onunload=window.onbeforeunload=function(){e.onBeforeUnLoadEvent||(e.onBeforeUnLoadEvent=!0,e.eventCallback(u.Event.UNLOAD,{currentTime:e.player.getCurrentTime()}))},this._adModule=new m.Bitmovin8AdModule(this.player)},t.prototype.sourceChange=function(e,t){this.stateMachine.sourceChange(e,t,this.player.getCurrentTime())},t.prototype.onError=function(){this.clearSegments()},t}(o.InternalAdapter);t.Bitmovin8InternalAdapter=N},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=n(1),r=n(1),s=n(10),o=n(3),E=n(15),l=n(0);!function(e){e.SETUP="SETUP",e.STARTUP="STARTUP",e.READY="READY",e.PLAYING="PLAYING",e.REBUFFERING="REBUFFERING",e.PAUSE="PAUSE",e.QUALITYCHANGE="QUALITYCHANGE",e.PAUSED_SEEKING="PAUSED_SEEKING",e.END_PAUSED_SEEKING="END_PAUSED_SEEKING",e.PLAY_SEEKING="PLAY_SEEKING",e.END_PLAY_SEEKING="END_PLAY_SEEKING",e.QUALITYCHANGE_PAUSE="QUALITYCHANGE_PAUSE",e.QUALITYCHANGE_REBUFFERING="QUALITYCHANGE_REBUFFERING",e.END="END",e.ERROR="ERROR",e.AD_STARTUP="AD_STARTUP",e.AD_READY="AD_READY",e.AD_PAUSE="AD_PAUSE",e.AD_PLAYING="AD_PLAYING",e.MUTING_READY="MUTING_READY",e.MUTING_PLAY="MUTING_PLAY",e.MUTING_PAUSE="MUTING_PAUSE",e.CASTING="CASTING",e.SOURCE_CHANGING="SOURCE_CHANGING",e.INITIAL_SOURCE_CHANGE="INITIAL_SOURCE_CHANGE",e.SOURCE_LOADED="SOURCE_LOADED",e.SUBTITLE_CHANGING="SUBTITLE_CHANGING",e.AUDIOTRACK_CHANGING="AUDIOTRACK_CHANGING"}(a||(a={}));var c=function(){function e(e,t){var n=this;this.debuggingStates=[],this.enabledDebugging=!1,this.sourceChange=function(e,t,a){n.callEvent(o.Event.MANUAL_SOURCE_CHANGE,{config:e,currentTime:a},t)},this.stateMachineCallbacks=e,this.seekTimestamp=0,this.seekedTimestamp=0,this.onEnterStateTimestamp=0,this.createStateMachine(t)}return e.prototype.getAllStatesBut=function(e){return this.getAllStates().filter(function(t){return t!==e})},e.prototype.getAllStates=function(){return Object.keys(a).map(function(e){return a[e]})},e.prototype.createStateMachine=function(e){var t=this;this.stateMachine=s.create({initial:a.SETUP,error:function(e,t,n,a,r,s){i.logger.error("Error in statemachine: "+s)},events:[{name:o.Event.SOURCE_LOADED,from:[a.SETUP,a.ERROR,a.SOURCE_CHANGING,a.INITIAL_SOURCE_CHANGE],to:a.READY},{name:o.Event.PLAY,from:a.READY,to:a.STARTUP},{name:o.Event.PLAYING,from:a.READY,to:a.PLAYING},{name:o.Event.READY,from:a.READY,to:a.READY},{name:o.Event.VIDEO_CHANGE,from:a.READY,to:a.READY},{name:o.Event.AUDIO_CHANGE,from:a.READY,to:a.READY},{name:o.Event.PLAY,from:a.STARTUP,to:a.STARTUP},{name:o.Event.PLAYING,from:a.STARTUP,to:a.STARTUP},{name:o.Event.TIMECHANGED,from:a.STARTUP,to:a.PLAYING},{name:o.Event.START_BUFFERING,from:a.STARTUP,to:a.STARTUP},{name:o.Event.END_BUFFERING,from:a.STARTUP,to:a.STARTUP},{name:o.Event.VIDEO_CHANGE,from:a.STARTUP,to:a.STARTUP},{name:o.Event.AUDIO_CHANGE,from:a.STARTUP,to:a.STARTUP},{name:o.Event.READY,from:a.STARTUP,to:a.STARTUP},{name:o.Event.PLAYING,from:a.PLAYING,to:a.PLAYING},{name:o.Event.TIMECHANGED,from:a.PLAYING,to:a.PLAYING},{name:o.Event.END_BUFFERING,from:a.PLAYING,to:a.PLAYING},{name:o.Event.START_BUFFERING,from:a.PLAYING,to:a.REBUFFERING},{name:o.Event.END_BUFFERING,from:a.REBUFFERING,to:a.PLAYING},{name:o.Event.TIMECHANGED,from:a.REBUFFERING,to:a.REBUFFERING},{name:o.Event.PAUSE,from:a.PLAYING,to:a.PAUSE},{name:o.Event.PAUSE,from:a.REBUFFERING,to:a.PAUSE},{name:o.Event.PLAY,from:a.PAUSE,to:a.PLAYING},{name:o.Event.VIDEO_CHANGE,from:a.PLAYING,to:a.QUALITYCHANGE},{name:o.Event.AUDIO_CHANGE,from:a.PLAYING,to:a.QUALITYCHANGE},{name:o.Event.VIDEO_CHANGE,from:a.QUALITYCHANGE,to:a.QUALITYCHANGE},{name:o.Event.AUDIO_CHANGE,from:a.QUALITYCHANGE,to:a.QUALITYCHANGE},{name:"FINISH_QUALITYCHANGE",from:a.QUALITYCHANGE,to:a.PLAYING},{name:o.Event.VIDEO_CHANGE,from:a.PAUSE,to:a.QUALITYCHANGE_PAUSE},{name:o.Event.AUDIO_CHANGE,from:a.PAUSE,to:a.QUALITYCHANGE_PAUSE},{name:o.Event.VIDEO_CHANGE,from:a.QUALITYCHANGE_PAUSE,to:a.QUALITYCHANGE_PAUSE},{name:o.Event.AUDIO_CHANGE,from:a.QUALITYCHANGE_PAUSE,to:a.QUALITYCHANGE_PAUSE},{name:"FINISH_QUALITYCHANGE_PAUSE",from:a.QUALITYCHANGE_PAUSE,to:a.PAUSE},{name:o.Event.SEEK,from:a.PAUSE,to:a.PAUSED_SEEKING},{name:o.Event.SEEK,from:a.PAUSED_SEEKING,to:a.PAUSED_SEEKING},{name:o.Event.SEEKED,from:a.PAUSED_SEEKING,to:a.PAUSE},{name:o.Event.PLAY,from:a.PAUSED_SEEKING,to:a.END_PAUSED_SEEKING},{name:o.Event.PLAYING,from:a.END_PAUSED_SEEKING,to:a.END_PAUSED_SEEKING},{name:o.Event.TIMECHANGED,from:a.END_PAUSED_SEEKING,to:a.END_PAUSED_SEEKING},{name:o.Event.SEEKED,from:a.END_PAUSED_SEEKING,to:a.PLAYING},{name:o.Event.AUDIO_CHANGE,from:a.PAUSED_SEEKING,to:a.PAUSED_SEEKING},{name:o.Event.VIDEO_CHANGE,from:a.PAUSED_SEEKING,to:a.PAUSED_SEEKING},{name:o.Event.START_BUFFERING,from:a.PAUSED_SEEKING,to:a.PAUSED_SEEKING},{name:o.Event.END_BUFFERING,from:a.PAUSED_SEEKING,to:a.PAUSED_SEEKING},{name:o.Event.SEEK,from:a.PLAYING,to:a.PLAY_SEEKING},{name:o.Event.SEEK,from:a.PLAY_SEEKING,to:a.PLAY_SEEKING},{name:o.Event.AUDIO_CHANGE,from:a.PLAY_SEEKING,to:a.PLAY_SEEKING},{name:o.Event.VIDEO_CHANGE,from:a.PLAY_SEEKING,to:a.PLAY_SEEKING},{name:o.Event.START_BUFFERING,from:a.PLAY_SEEKING,to:a.PLAY_SEEKING},{name:o.Event.END_BUFFERING,from:a.PLAY_SEEKING,to:a.PLAY_SEEKING},{name:o.Event.PLAY,from:a.PLAY_SEEKING,to:a.END_PLAY_SEEKING},{name:o.Event.PLAYING,from:a.PLAY_SEEKING,to:a.END_PLAY_SEEKING},{name:o.Event.SEEKED,from:a.PLAY_SEEKING,to:a.END_PLAY_SEEKING},{name:o.Event.SEEK,from:a.END_PLAY_SEEKING,to:a.PLAY_SEEKING},{name:o.Event.START_BUFFERING,from:a.END_PLAY_SEEKING,to:a.END_PLAY_SEEKING},{name:o.Event.END_BUFFERING,from:a.END_PLAY_SEEKING,to:a.END_PLAY_SEEKING},{name:o.Event.SEEKED,from:a.END_PLAY_SEEKING,to:a.END_PLAY_SEEKING},{name:o.Event.PLAY,from:a.END_PLAY_SEEKING,to:a.END_PLAY_SEEKING},{name:o.Event.PLAYING,from:a.END_PLAY_SEEKING,to:a.PLAYING},{name:o.Event.TIMECHANGED,from:a.END_PLAY_SEEKING,to:a.PLAYING},{name:o.Event.END,from:a.PLAY_SEEKING,to:a.END},{name:o.Event.END,from:a.PAUSED_SEEKING,to:a.END},{name:o.Event.END,from:a.PLAYING,to:a.END},{name:o.Event.END,from:a.PAUSE,to:a.END},{name:o.Event.SEEK,from:a.END,to:a.END},{name:o.Event.SEEKED,from:a.END,to:a.END},{name:o.Event.TIMECHANGED,from:a.END,to:a.END},{name:o.Event.END_BUFFERING,from:a.END,to:a.END},{name:o.Event.START_BUFFERING,from:a.END,to:a.END},{name:o.Event.END,from:a.END,to:a.END},{name:o.Event.PLAY,from:a.END,to:a.STARTUP},{name:o.Event.ERROR,from:this.getAllStates(),to:a.ERROR},{name:o.Event.UNLOAD,from:this.getAllStates(),to:a.END},{name:o.Event.SUBTITLE_CHANGE,from:a.PLAYING,to:a.SUBTITLE_CHANGING},{name:o.Event.SUBTITLE_CHANGE,from:a.PAUSE,to:a.PAUSE},{name:o.Event.SUBTITLE_CHANGE,from:a.REBUFFERING,to:a.REBUFFERING},{name:o.Event.SUBTITLE_CHANGE,from:a.END_PLAY_SEEKING,to:a.END_PLAY_SEEKING},{name:o.Event.SUBTITLE_CHANGE,from:a.SUBTITLE_CHANGING,to:a.SUBTITLE_CHANGING},{name:o.Event.TIMECHANGED,from:a.SUBTITLE_CHANGING,to:a.PLAYING},{name:o.Event.AUDIOTRACK_CHANGED,from:a.PLAYING,to:a.AUDIOTRACK_CHANGING},{name:o.Event.AUDIOTRACK_CHANGED,from:a.PAUSE,to:a.PAUSE},{name:o.Event.AUDIOTRACK_CHANGED,from:a.REBUFFERING,to:a.REBUFFERING},{name:o.Event.AUDIOTRACK_CHANGED,from:a.END_PLAY_SEEKING,to:a.END_PLAY_SEEKING},{name:o.Event.AUDIOTRACK_CHANGED,from:a.AUDIOTRACK_CHANGING,to:a.AUDIOTRACK_CHANGING},{name:o.Event.TIMECHANGED,from:a.AUDIOTRACK_CHANGING,to:a.PLAYING},{name:o.Event.START_AD,from:a.STARTUP,to:a.AD_STARTUP},{name:o.Event.END_AD,from:a.AD_STARTUP,to:a.STARTUP},{name:o.Event.PLAY,from:a.AD_STARTUP,to:a.AD_STARTUP},{name:o.Event.PAUSE,from:a.AD_STARTUP,to:a.AD_STARTUP},{name:o.Event.TIMECHANGED,from:a.AD_STARTUP,to:a.AD_STARTUP},{name:o.Event.START_AD,from:a.READY,to:a.AD_READY},{name:o.Event.END_AD,from:a.AD_READY,to:a.READY},{name:o.Event.PLAY,from:a.AD_READY,to:a.AD_READY},{name:o.Event.PAUSE,from:a.AD_READY,to:a.AD_READY},{name:o.Event.TIMECHANGED,from:a.AD_READY,to:a.AD_READY},{name:o.Event.START_AD,from:a.PAUSE,to:a.AD_PAUSE},{name:o.Event.END_AD,from:a.AD_PAUSE,to:a.PAUSE},{name:o.Event.PLAY,from:a.AD_PAUSE,to:a.AD_PAUSE},{name:o.Event.PAUSE,from:a.AD_PAUSE,to:a.AD_PAUSE},{name:o.Event.TIMECHANGED,from:a.AD_PAUSE,to:a.AD_PAUSE},{name:o.Event.START_AD,from:a.PLAYING,to:a.AD_PLAYING},{name:o.Event.END_AD,from:a.AD_PLAYING,to:a.PLAYING},{name:o.Event.PLAY,from:a.AD_PLAYING,to:a.AD_PLAYING},{name:o.Event.PAUSE,from:a.AD_PLAYING,to:a.AD_PLAYING},{name:o.Event.TIMECHANGED,from:a.AD_PLAYING,to:a.AD_PLAYING},{name:o.Event.END,from:a.AD_PLAYING,to:a.END},{name:o.Event.MUTE,from:a.READY,to:a.MUTING_READY},{name:o.Event.UN_MUTE,from:a.READY,to:a.MUTING_READY},{name:"FINISH_MUTING",from:a.MUTING_READY,to:a.READY},{name:o.Event.MUTE,from:a.PLAYING,to:a.MUTING_PLAY},{name:o.Event.UN_MUTE,from:a.PLAYING,to:a.MUTING_PLAY},{name:"FINISH_MUTING",from:a.MUTING_PLAY,to:a.PLAYING},{name:o.Event.MUTE,from:a.PAUSE,to:a.MUTING_PAUSE},{name:o.Event.UN_MUTE,from:a.PAUSE,to:a.MUTING_PAUSE},{name:"FINISH_MUTING",from:a.MUTING_PAUSE,to:a.PAUSE},{name:o.Event.START_CAST,from:[a.READY,a.PAUSE],to:a.CASTING},{name:o.Event.PAUSE,from:a.CASTING,to:a.CASTING},{name:o.Event.PLAY,from:a.CASTING,to:a.CASTING},{name:o.Event.TIMECHANGED,from:a.CASTING,to:a.CASTING},{name:o.Event.MUTE,from:a.CASTING,to:a.CASTING},{name:o.Event.SEEK,from:a.CASTING,to:a.CASTING},{name:o.Event.SEEKED,from:a.CASTING,to:a.CASTING},{name:o.Event.END_CAST,from:a.CASTING,to:a.READY},{name:o.Event.SEEK,from:a.READY,to:a.READY},{name:o.Event.SEEKED,from:a.READY,to:a.READY},{name:o.Event.SEEKED,from:a.STARTUP,to:a.STARTUP},{name:o.Event.MANUAL_SOURCE_CHANGE,from:this.getAllStatesBut(a.SETUP),to:a.SOURCE_CHANGING},{name:o.Event.MANUAL_SOURCE_CHANGE,from:a.SETUP,to:a.INITIAL_SOURCE_CHANGE},{name:o.Event.SOURCE_UNLOADED,from:this.getAllStates(),to:a.SOURCE_CHANGING},{name:o.Event.VIDEO_CHANGE,from:a.REBUFFERING,to:a.QUALITYCHANGE_REBUFFERING},{name:o.Event.AUDIO_CHANGE,from:a.REBUFFERING,to:a.QUALITYCHANGE_REBUFFERING},{name:o.Event.VIDEO_CHANGE,from:a.QUALITYCHANGE_REBUFFERING,to:a.QUALITYCHANGE_REBUFFERING},{name:o.Event.AUDIO_CHANGE,from:a.QUALITYCHANGE_REBUFFERING,to:a.QUALITYCHANGE_REBUFFERING},{name:"FINISH_QUALITYCHANGE_REBUFFERING",from:a.QUALITYCHANGE_REBUFFERING,to:a.REBUFFERING}],callbacks:{onbeforeevent:function(e,t,n,i,r){if(t===a.REBUFFERING&&n===a.QUALITYCHANGE_REBUFFERING)return!1},onafterevent:function(e,n,i,r){i===a.QUALITYCHANGE_PAUSE&&t.stateMachine.FINISH_QUALITYCHANGE_PAUSE(r),i===a.QUALITYCHANGE&&t.stateMachine.FINISH_QUALITYCHANGE(r),i===a.QUALITYCHANGE_REBUFFERING&&t.stateMachine.FINISH_QUALITYCHANGE_REBUFFERING(r),i!==a.MUTING_READY&&i!==a.MUTING_PLAY&&i!==a.MUTING_PAUSE||t.stateMachine.FINISH_MUTING(r)},onenterstate:function(n,s,E,l,c){"none"===s&&e.starttime?t.onEnterStateTimestamp=e.starttime:t.onEnterStateTimestamp=l||(new Date).getTime(),i.logger.log("[ENTER "+l+"] "+r.padRight(E,20)+"EVENT: "+r.padRight(n,20)+" from "+r.padRight(s,20)),c&&E!==a.END_PAUSED_SEEKING&&E!==a.END_PLAY_SEEKING&&t.stateMachineCallbacks.setVideoTimeStartFromEvent(c),n===o.Event.START_CAST&&E===a.CASTING&&t.stateMachineCallbacks.startCasting(l,c)},onleavestate:function(e,n,s,E,c){if(E){i.logger.log("[LEAVE "+E+"] "+r.padRight(n,20)+"EVENT: "+r.padRight(e,20)+" to "+r.padRight(s,20)),t.addStatesToLog(e,n,s,E,c);var u=E-t.onEnterStateTimestamp;if(n===a.PAUSED_SEEKING&&s===a.END_PAUSED_SEEKING)return!0;c&&s!==a.END_PAUSED_SEEKING&&s!==a.END_PLAY_SEEKING&&t.stateMachineCallbacks.setVideoTimeEndFromEvent(c);var d=String(n).toLowerCase();if(n===a.PAUSED_SEEKING||n===a.END_PAUSED_SEEKING){var m=E-t.seekTimestamp;t.stateMachineCallbacks.paused_seeking(m,d,c)}else if(n===a.END_PLAY_SEEKING){m=t.seekedTimestamp-t.seekTimestamp;t.stateMachineCallbacks.end_play_seeking(m,d,c)}else if(e===o.Event.UNLOAD&&n===a.PLAYING)t.stateMachineCallbacks.playingAndBye(u,d,c);else if(n===a.AD_PAUSE||n===a.AD_READY||n===a.AD_PLAYING||n===a.AD_STARTUP)t.stateMachineCallbacks.ad(u,"ad",c);else if(e===o.Event.START_AD&&n===a.STARTUP)l.noOp();else if(e===o.Event.SOURCE_LOADED&&n===a.INITIAL_SOURCE_CHANGE)l.noOp();else if(n!==a.ERROR){var A=t.stateMachineCallbacks[d];if("function"==typeof A)try{A(u,d,c)}catch(e){i.logger.error("Exception occured in State Machine callback "+d,c,e)}else i.logger.error("Could not find callback function for "+d)}c&&s!==a.END_PAUSED_SEEKING&&s!==a.END_PLAY_SEEKING&&t.stateMachineCallbacks.setVideoTimeStartFromEvent(c),e===o.Event.VIDEO_CHANGE?t.stateMachineCallbacks.videoChange(c):e===o.Event.AUDIO_CHANGE?t.stateMachineCallbacks.audioChange(c):e===o.Event.MUTE?t.stateMachineCallbacks.mute():e===o.Event.UN_MUTE?t.stateMachineCallbacks.unMute():e===o.Event.MANUAL_SOURCE_CHANGE&&n===a.SETUP?t.stateMachineCallbacks.initialSourceChange(c):e===o.Event.MANUAL_SOURCE_CHANGE&&t.stateMachineCallbacks.manualSourceChange(c)}},onseek:function(e,n,a,i){t.seekTimestamp=i},onseeked:function(e,n,a,i){t.seekedTimestamp=i},ontimechanged:function(e,n,a,i,r){var s=i-t.onEnterStateTimestamp;s>59700&&(t.stateMachineCallbacks.setVideoTimeEndFromEvent(r),t.stateMachineCallbacks.heartbeat(s,String(n).toLowerCase(),r),t.onEnterStateTimestamp=i,t.stateMachineCallbacks.setVideoTimeStartFromEvent(r))},onplayerError:function(e,n,a,i,r){t.stateMachineCallbacks.error(r)}}})},e.prototype.callEvent=function(e,t,n){var a=this.stateMachine[e];if(a)try{a.call(this.stateMachine,n,t)}catch(n){i.logger.error("Exception occured in State Machine callback "+e,a,t,n)}else i.logger.log("Ignored Event: "+e)},e.prototype.addStatesToLog=function(e,t,n,a,i){this.enabledDebugging&&this.debuggingStates.push(new E.EventDebugging(e,t,n,a,i))},e.prototype.getStates=function(){return this.debuggingStates},e.prototype.setEnabledDebugging=function(e){this.enabledDebugging=e},e.prototype.updateMetadata=function(e){},e}();t.Bitmovin8AnalyticsStateMachine=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(46),i=function(){function e(e){var t=this;this.player=e,this.adCallbacks=new a.AdCallbacks,this.isLinearAdActive=function(){return t.player.ads&&t.player.ads.isLinearAdActive()||!1},this.getContainer=function(){return t.player.getContainer()},this.getAdModuleInfo=function(){return t.player.ads?t.player.ads.getModuleInfo():{name:void 0,version:void 0}},this.currentTime=function(){return t.player.getCurrentTime()},this.register()}return e.prototype.register=function(){var e=this;this.player.on(this.player.exports.PlayerEvent.Play,function(t){"advertising-api"===t.issuer&&e.adCallbacks.onPlay(t.issuer)}),this.player.on(this.player.exports.PlayerEvent.Paused,function(t){"advertising-api"===t.issuer&&e.adCallbacks.onPause(t.issuer)}),this.player.on(this.player.exports.PlayerEvent.AdStarted,function(t){e.adCallbacks.onAdStarted(t)}),this.player.on(this.player.exports.PlayerEvent.AdFinished,function(t){e.adCallbacks.onAdFinished(t)}),this.player.on(this.player.exports.PlayerEvent.AdBreakStarted,function(t){e.adCallbacks.onAdBreakStarted(t)}),this.player.on(this.player.exports.PlayerEvent.AdBreakFinished,function(t){e.adCallbacks.onAdBreakFinished(t)}),this.player.on(this.player.exports.PlayerEvent.AdClicked,function(t){e.adCallbacks.onAdClicked(t)}),this.player.on(this.player.exports.PlayerEvent.AdQuartile,function(t){e.adCallbacks.onAdQuartile(t)}),this.player.on(this.player.exports.PlayerEvent.AdSkipped,function(t){e.adCallbacks.onAdSkipped(t)}),this.player.on(this.player.exports.PlayerEvent.AdError,function(t){e.adCallbacks.onAdError(t)}),this.player.on(this.player.exports.PlayerEvent.AdManifestLoaded,function(t){e.adCallbacks.onAdManifestLoaded(t)}),window.onunload=window.onbeforeunload=function(){e.adCallbacks.onBeforeUnload()}},e}();t.Bitmovin8AdModule=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){return function(){this.onAdStarted=function(e){},this.onAdFinished=function(e){},this.onAdBreakStarted=function(e){},this.onAdBreakFinished=function(e){},this.onAdClicked=function(e){},this.onAdError=function(e){},this.onAdManifestLoaded=function(e){},this.onAdQuartile=function(e){},this.onAdSkipped=function(e){},this.onPlay=function(e){},this.onPause=function(e){},this.onBeforeUnload=function(){}}}();t.AdCallbacks=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(48),i=n(49),r=function(){function e(){this.measures=[]}return e.prototype.reset=function(){this.measures=[]},e.prototype.addMeasurement=function(e){if(!(e.httpStatus>=400)){var t=new i.Measure(e),n=a.Converter.bitsToBytes(3e8);t.speed>=n||this.measures.push(t)}},e.prototype.getInfo=function(){return{segmentsDownloadCount:this.measures.length,segmentsDownloadSize:this.measures.map(function(e){return e.size}).reduce(this.add,0),segmentsDownloadTime:Math.ceil(1e3*this.totalTime()),avgDownloadSpeed:this.avgSpeed(),minDownloadSpeed:this.minSpeed(),maxDownloadSpeed:this.maxSpeed(),avgTimeToFirstByte:this.avgTimeToFirstByte()}},e.prototype.add=function(e,t){return e+t},e.prototype.avgSpeed=function(){if(0===this.measures.length)return 0;var e=this.speeds().reduce(function(e,t){return e+t},0),t=this.measures.length;return this.bytePerSecondToBitPerSecond(e/t)},e.prototype.bytePerSecondToBitPerSecond=function(e){return a.Converter.bytesToBits(e)},e.prototype.minSpeed=function(){return 0===this.measures.length?0:this.bytePerSecondToBitPerSecond(Math.min.apply(Math,this.speeds()))},e.prototype.speeds=function(){return this.measures.map(function(e){return e.speed})},e.prototype.maxSpeed=function(){return 0===this.measures.length?0:this.bytePerSecondToBitPerSecond(Math.max.apply(Math,this.speeds()))},e.prototype.totalTime=function(){return 0===this.measures.length?0:this.measures.reduce(function(e,t){return e+t.duration},0)},e.prototype.avgTimeToFirstByte=function(){if(0===this.measures.length)return 0;var e=this.measures.reduce(function(e,t){return e+1e3*t.timeToFirstByte},0)/this.measures.length;return Math.ceil(e)},e}();t.DownloadSpeedMeter=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=function(){function e(){}return e.bytesToBits=function(e){return 8*e},e.bitsToBytes=function(e){return Math.round(e/8)},e.bytesToKiloBytes=function(e){return a.calculateTime(1e3*e)},e.kiloBytesToMegaBytes=function(e){return 1e3*e},e}();t.Converter=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.download=e}return Object.defineProperty(e.prototype,"speed",{get:function(){return this.download.size/this.download.duration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this.download.duration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.download.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeToFirstByte",{get:function(){return this.download.timeToFirstByte},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timestamp",{get:function(){return this.download.timestamp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"httpStatus",{get:function(){return this.download.httpStatus},enumerable:!0,configurable:!0}),e}();t.Measure=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){var n=this;this.meter=t,e.on(e.exports.PlayerEvent.DownloadFinished,function(e){return n.handleOnDownloadFinishEvent(e)})}return e.prototype.getDownloadSpeedMeter=function(){return this.meter},e.prototype.handleOnDownloadFinishEvent=function(e){e.success&&0===e.downloadType.indexOf("media/video")&&this.meter.addMeasurement({duration:e.downloadTime,size:e.size,timeToFirstByte:e.timeToFirstByte,timestamp:new Date,httpStatus:e.httpStatus})},e}();t.Bitmovin8SpeedMeterAdapter=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){this.segments=[]}return e.prototype.reset=function(){this.segments=[]},e.prototype.addSegment=function(e){this.segments.push(e)},e.prototype.removeSegment=function(e){this.segments=this.segments.filter(function(t){return t.url!==e})},e.prototype.getSegments=function(){return this.segments},e}();t.SegmentTracker=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=function(){function e(e,t){var n=this;this.handleSegmentPlaybackEvent=function(e){n.segmentTracker.removeSegment(e.url)},this.segmentTracker=t,e.on(e.exports.PlayerEvent.DownloadFinished,function(e){return n.handleOnDownloadFinishEvent(e)}),e.on(e.exports.PlayerEvent.SegmentPlayback,function(e){return n.handleSegmentPlaybackEvent(e)})}return e.prototype.getSegmentTracker=function(){return this.segmentTracker},e.prototype.handleOnDownloadFinishEvent=function(e){if(0===e.downloadType.indexOf("media/video")){var t=e.url,n={name:a.getURLResourceName(t),url:t,timestamp:e.timestamp};this.segmentTracker.addSegment(n)}},e}();t.Bitmovin8SegmentTrackerAdapter=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.BitmovinPlayerLicensingError=1103]="BitmovinPlayerLicensingError",e[e.SetupMissingLicenseWhitelist=1105]="SetupMissingLicenseWhitelist"}(t.ErrorCode||(t.ErrorCode={}))},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),s=n(1),o=n(5),E=n(55),l=function(e){function t(t,n){var a=e.call(this)||this;return a.augment(t,n),a}return i(t,e),t.prototype.augment=function(e,t){if(this.hasPlayerAlreadyBeenAugmented(e))s.logger.errorMessageToUser("Bitmovin Analytics is already hooked up to this player instance");else{this.markPlayerInstanceAsAugmented(e);var n=this,a=e.setup;e.setup=function(){var i=a.apply(e,arguments);if(0===arguments.length)return i;var o=arguments[0].analytics;return o?(n.internalAdapter=new E.Bitmovin7InternalAdapter(e,t),n.analytics=new r.Analytics(o,e,n.internalAdapter),e.analytics=n.analytics,n.wrapPlayerLoad(e,n.analytics),i):(s.logger.error("Bitmovin Analytics: No analytics config provided!"),i)}}},t.prototype.wrapPlayerLoad=function(e,t){var n=e.load;e.load=function(){if(arguments.length>0){var a=arguments[0].analytics;t.sourceChange(a)}return n.apply(e,arguments)}},t.prototype.hasPlayerAlreadyBeenAugmented=function(e){return e.__analyticsHasBeenSetup},t.prototype.markPlayerInstanceAsAugmented=function(e){e.__analyticsHasBeenSetup=!0},t}(o.Adapter);t.Bitmovin7Adapter=l},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(9),o=n(56),E=n(2),l=n(16),c=n(3),u=n(7),d=function(e){function t(t,n){var a=e.call(this,n)||this;return a.player=t,a._drmPerformanceInfo={drmUsed:!1},a.onBeforeUnLoadEvent=!1,a.getPlayerVersion=function(){return a.player.version},a.getPlayerName=function(){return E.Player.BITMOVIN},a.getPlayerTech=function(){return a.player.getPlayerType()},a.stateMachine=new o.Bitmovin7AnalyticsStateMachine(a.stateMachineCallbacks,a.opts),a.register(),a}return i(t,e),Object.defineProperty(t.prototype,"drmPerformanceInfo",{get:function(){return this._drmPerformanceInfo},enumerable:!0,configurable:!0}),t.prototype.getAutoPlay=function(){return this.player.getConfig().playback&&this.player.getConfig().playback.autoplay||!1},t.prototype.getCurrentPlaybackInfo=function(){var t=this,n={},a=this.player.getConfig().source;if(a){var i=l.getSourceInfoFromBitmovinSourceConfig(a.progressive,this.player);n.videoTitle=a.title,n.mpdUrl=a.dash,n.m3u8Url=a.hls,n.progUrl=i.progUrl,n.progBitrate=i.progBitrate}var s=this.player.getSubtitle()||{},o=r({},e.prototype.getCommonPlaybackInfo.call(this),{size:this.player.isFullscreen()?u.PlayerSize.Fullscreen:u.PlayerSize.Window,playerTech:this.getPlayerTech(),isLive:this.player.isLive(),videoDuration:this.player.getDuration(),streamFormat:this.player.getStreamType(),videoWindowWidth:this.player.getFigure().offsetWidth,videoWindowHeight:this.player.getFigure().offsetHeight,isMuted:this.player.isMuted(),isCasting:this.player.isCasting(),audioLanguage:null!=this.player.getAudio()?this.player.getAudio().lang:null,subtitleEnabled:null!=s.id,subtitleLanguage:s.lang,droppedFrames:t.player.isReady()?t.player.getDroppedFrames():0},n),E=this.player.getPlaybackVideoData();E&&(o.videoBitrate=E.bitrate,o.videoPlaybackHeight=E.height,o.videoPlaybackWidth=E.width),"progressive"===o.streamFormat&&(o.videoBitrate=n.progBitrate);var c=this.player.getPlaybackAudioData();return c&&(o.audioBitrate=c.bitrate),o},t.prototype.register=function(){var e=this;this.player.addEventHandler(this.player.EVENT.ON_SOURCE_UNLOADED,function(t){e.eventCallback(c.Event.SOURCE_UNLOADED,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_SOURCE_LOADED,function(t){e.eventCallback(c.Event.SOURCE_LOADED,{})}),this.player.addEventHandler(this.player.EVENT.ON_READY,function(){e.eventCallback(c.Event.READY,{})}),this.player.addEventHandler(this.player.EVENT.ON_CAST_STARTED,function(t){e.eventCallback(c.Event.START_CAST,t)}),this.player.addEventHandler(this.player.EVENT.ON_CAST_STOPPED,function(){e.eventCallback(c.Event.END_CAST,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_PLAY,function(){e.eventCallback(c.Event.PLAY,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_PAUSED,function(){e.eventCallback(c.Event.PAUSE,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_TIME_CHANGED,function(){e.eventCallback(c.Event.TIMECHANGED,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_SEEK,function(){e.eventCallback(c.Event.SEEK,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_SEEKED,function(){e.eventCallback(c.Event.SEEKED,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_STALL_STARTED,function(){e.eventCallback(c.Event.START_BUFFERING,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_STALL_ENDED,function(){e.eventCallback(c.Event.END_BUFFERING,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_AUDIO_PLAYBACK_QUALITY_CHANGED,function(){var t=e.player.getPlaybackAudioData();e.eventCallback(c.Event.AUDIO_CHANGE,{bitrate:t.bitrate,currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_VIDEO_PLAYBACK_QUALITY_CHANGED,function(){var t=e.player.getPlaybackVideoData();e.eventCallback(c.Event.VIDEO_CHANGE,{width:t.width,height:t.height,bitrate:t.bitrate,currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_FULLSCREEN_ENTER,function(){e.eventCallback(c.Event.START_FULLSCREEN,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_FULLSCREEN_EXIT,function(){e.eventCallback(c.Event.END_FULLSCREEN,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_AD_STARTED,function(){e.eventCallback(c.Event.START_AD,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_AD_FINISHED,function(){e.eventCallback(c.Event.END_AD,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_MUTED,function(){e.eventCallback(c.Event.MUTE,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_UNMUTED,function(){e.eventCallback(c.Event.UN_MUTE,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_ERROR,function(t){e.eventCallback(c.Event.ERROR,{code:t.code,message:t.message,currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_PLAYBACK_FINISHED,function(){e.eventCallback(c.Event.PLAYBACK_FINISHED,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_DOWNLOAD_FINISHED,function(t){0===t.downloadType.indexOf("drm/license/")&&(e.drmPerformanceInfo.drmTime=1e3*t.downloadTime,e.drmPerformanceInfo.drmInfo=t.downloadType.replace("drm/license/",""),e.drmPerformanceInfo.drmUsed=!0)}),this.player.addEventHandler(this.player.EVENT.ON_AUDIO_CHANGED,function(t){e.eventCallback(c.Event.AUDIOTRACK_CHANGED,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_SUBTITLE_CHANGED,function(t){e.eventCallback(c.Event.SUBTITLE_CHANGE,{currentTime:e.player.getCurrentTime()})}),window.onunload=window.onbeforeunload=function(){e.onBeforeUnLoadEvent||(e.onBeforeUnLoadEvent=!0,e.eventCallback(c.Event.UNLOAD,{currentTime:e.player.getCurrentTime()}))}},t.prototype.sourceChange=function(e,t){this.stateMachine.sourceChange(e,t,this.player.getCurrentTime())},t}(s.InternalAdapter);t.Bitmovin7InternalAdapter=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=n(1),r=n(1),s=n(10),o=n(3),E=n(15);!function(e){e.SETUP="SETUP",e.STARTUP="STARTUP",e.READY="READY",e.PLAYING="PLAYING",e.REBUFFERING="REBUFFERING",e.PAUSE="PAUSE",e.QUALITYCHANGE="QUALITYCHANGE",e.PAUSED_SEEKING="PAUSED_SEEKING",e.PLAY_SEEKING="PLAY_SEEKING",e.END_PLAY_SEEKING="END_PLAY_SEEKING",e.QUALITYCHANGE_PAUSE="QUALITYCHANGE_PAUSE",e.QUALITYCHANGE_REBUFFERING="QUALITYCHANGE_REBUFFERING",e.END="END",e.ERROR="ERROR",e.AD="AD",e.MUTING_READY="MUTING_READY",e.MUTING_PLAY="MUTING_PLAY",e.MUTING_PAUSE="MUTING_PAUSE",e.CASTING="CASTING",e.SOURCE_CHANGING="SOURCE_CHANGING",e.SUBTITLE_CHANGING="SUBTITLE_CHANGING",e.AUDIOTRACK_CHANGING="AUDIOTRACK_CHANGING"}(a||(a={}));var l=function(){function e(e,t){var n=this;this.debuggingStates=[],this.enabledDebugging=!1,this.sourceChange=function(e,t,a){n.callEvent(o.Event.MANUAL_SOURCE_CHANGE,{config:e,currentTime:a},t)},this.stateMachineCallbacks=e,this.pausedTimestamp=null,this.seekTimestamp=0,this.seekedTimestamp=0,this.seekedTimeout=0,this.onEnterStateTimestamp=0,this.states=a,this.createStateMachine(t)}return e.prototype.getAllStates=function(){var e=this;return Object.keys(this.states).map(function(t){return e.states[t]}).concat(["FINISH_PLAY_SEEKING","PLAY_SEEK","FINISH_QUALITYCHANGE_PAUSE","FINISH_QUALITYCHANGE","FINISH_QUALITYCHANGE_REBUFFERING"])},e.prototype.createStateMachine=function(t){var n=this;this.stateMachine=s.create({initial:this.states.SETUP,error:function(e,t,n,a,r,s){i.logger.error("Error in statemachine: "+s)},events:[{name:o.Event.READY,from:[this.states.SETUP,this.states.ERROR],to:this.states.READY},{name:o.Event.PLAY,from:this.states.READY,to:this.states.STARTUP},{name:o.Event.START_BUFFERING,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.END_BUFFERING,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.VIDEO_CHANGE,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.AUDIO_CHANGE,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.TIMECHANGED,from:this.states.STARTUP,to:this.states.PLAYING},{name:o.Event.TIMECHANGED,from:this.states.PLAYING,to:this.states.PLAYING},{name:o.Event.END_BUFFERING,from:this.states.PLAYING,to:this.states.PLAYING},{name:o.Event.START_BUFFERING,from:this.states.PLAYING,to:this.states.REBUFFERING},{name:o.Event.END_BUFFERING,from:this.states.REBUFFERING,to:this.states.PLAYING},{name:o.Event.TIMECHANGED,from:this.states.REBUFFERING,to:this.states.REBUFFERING},{name:o.Event.PAUSE,from:this.states.PLAYING,to:this.states.PAUSE},{name:o.Event.PAUSE,from:this.states.REBUFFERING,to:this.states.PAUSE},{name:o.Event.PLAY,from:this.states.PAUSE,to:this.states.PLAYING},{name:o.Event.VIDEO_CHANGE,from:this.states.PLAYING,to:this.states.QUALITYCHANGE},{name:o.Event.AUDIO_CHANGE,from:this.states.PLAYING,to:this.states.QUALITYCHANGE},{name:o.Event.VIDEO_CHANGE,from:this.states.QUALITYCHANGE,to:this.states.QUALITYCHANGE},{name:o.Event.AUDIO_CHANGE,from:this.states.QUALITYCHANGE,to:this.states.QUALITYCHANGE},{name:"FINISH_QUALITYCHANGE",from:this.states.QUALITYCHANGE,to:this.states.PLAYING},{name:o.Event.VIDEO_CHANGE,from:this.states.PAUSE,to:this.states.QUALITYCHANGE_PAUSE},{name:o.Event.AUDIO_CHANGE,from:this.states.PAUSE,to:this.states.QUALITYCHANGE_PAUSE},{name:o.Event.VIDEO_CHANGE,from:this.states.QUALITYCHANGE_PAUSE,to:this.states.QUALITYCHANGE_PAUSE},{name:o.Event.AUDIO_CHANGE,from:this.states.QUALITYCHANGE_PAUSE,to:this.states.QUALITYCHANGE_PAUSE},{name:"FINISH_QUALITYCHANGE_PAUSE",from:this.states.QUALITYCHANGE_PAUSE,to:this.states.PAUSE},{name:o.Event.SEEK,from:this.states.PAUSE,to:this.states.PAUSED_SEEKING},{name:o.Event.SEEK,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.AUDIO_CHANGE,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.VIDEO_CHANGE,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.START_BUFFERING,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.END_BUFFERING,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.SEEKED,from:this.states.PAUSED_SEEKING,to:this.states.PAUSE},{name:o.Event.PLAY,from:this.states.PAUSED_SEEKING,to:this.states.PLAYING},{name:o.Event.PAUSE,from:this.states.PAUSED_SEEKING,to:this.states.PAUSE},{name:"PLAY_SEEK",from:this.states.PAUSE,to:this.states.PLAY_SEEKING},{name:"PLAY_SEEK",from:this.states.PAUSED_SEEKING,to:this.states.PLAY_SEEKING},{name:"PLAY_SEEK",from:this.states.PLAY_SEEKING,to:this.states.PLAY_SEEKING},{name:o.Event.SEEK,from:this.states.PLAY_SEEKING,to:this.states.PLAY_SEEKING},{name:o.Event.AUDIO_CHANGE,from:this.states.PLAY_SEEKING,to:this.states.PLAY_SEEKING},{name:o.Event.VIDEO_CHANGE,from:this.states.PLAY_SEEKING,to:this.states.PLAY_SEEKING},{name:o.Event.START_BUFFERING,from:this.states.PLAY_SEEKING,to:this.states.PLAY_SEEKING},{name:o.Event.END_BUFFERING,from:this.states.PLAY_SEEKING,to:this.states.PLAY_SEEKING},{name:o.Event.SEEKED,from:this.states.PLAY_SEEKING,to:this.states.PLAY_SEEKING},{name:o.Event.PLAY,from:this.states.PLAY_SEEKING,to:this.states.END_PLAY_SEEKING},{name:o.Event.START_BUFFERING,from:this.states.END_PLAY_SEEKING,to:this.states.END_PLAY_SEEKING},{name:o.Event.END_BUFFERING,from:this.states.END_PLAY_SEEKING,to:this.states.END_PLAY_SEEKING},{name:o.Event.SEEKED,from:this.states.END_PLAY_SEEKING,to:this.states.END_PLAY_SEEKING},{name:o.Event.TIMECHANGED,from:this.states.END_PLAY_SEEKING,to:this.states.PLAYING},{name:o.Event.END,from:this.states.PLAY_SEEKING,to:this.states.END},{name:o.Event.END,from:this.states.PAUSED_SEEKING,to:this.states.END},{name:o.Event.END,from:this.states.PLAYING,to:this.states.END},{name:o.Event.END,from:this.states.PAUSE,to:this.states.END},{name:o.Event.SEEK,from:this.states.END,to:this.states.END},{name:o.Event.SEEKED,from:this.states.END,to:this.states.END},{name:o.Event.TIMECHANGED,from:this.states.END,to:this.states.END},{name:o.Event.END_BUFFERING,from:this.states.END,to:this.states.END},{name:o.Event.START_BUFFERING,from:this.states.END,to:this.states.END},{name:o.Event.END,from:this.states.END,to:this.states.END},{name:o.Event.PLAY,from:this.states.END,to:this.states.STARTUP},{name:o.Event.ERROR,from:this.getAllStates(),to:this.states.ERROR},{name:o.Event.SEEK,from:this.states.END_PLAY_SEEKING,to:this.states.PLAY_SEEKING},{name:"FINISH_PLAY_SEEKING",from:this.states.END_PLAY_SEEKING,to:this.states.PLAYING},{name:o.Event.UNLOAD,from:this.getAllStates(),to:this.states.END},{name:o.Event.START_AD,from:this.states.PLAYING,to:this.states.AD},{name:o.Event.END_AD,from:this.states.AD,to:this.states.PLAYING},{name:o.Event.MUTE,from:this.states.READY,to:this.states.MUTING_READY},{name:o.Event.UN_MUTE,from:this.states.READY,to:this.states.MUTING_READY},{name:"FINISH_MUTING",from:this.states.MUTING_READY,to:this.states.READY},{name:o.Event.MUTE,from:this.states.PLAYING,to:this.states.MUTING_PLAY},{name:o.Event.UN_MUTE,from:this.states.PLAYING,to:this.states.MUTING_PLAY},{name:"FINISH_MUTING",from:this.states.MUTING_PLAY,to:this.states.PLAYING},{name:o.Event.MUTE,from:this.states.PAUSE,to:this.states.MUTING_PAUSE},{name:o.Event.UN_MUTE,from:this.states.PAUSE,to:this.states.MUTING_PAUSE},{name:"FINISH_MUTING",from:this.states.MUTING_PAUSE,to:this.states.PAUSE},{name:o.Event.START_CAST,from:[this.states.READY,this.states.PAUSE],to:this.states.CASTING},{name:o.Event.PAUSE,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.PLAY,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.TIMECHANGED,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.MUTE,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.SEEK,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.SEEKED,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.END_CAST,from:this.states.CASTING,to:this.states.READY},{name:o.Event.SEEK,from:this.states.READY,to:this.states.READY},{name:o.Event.SEEKED,from:this.states.READY,to:this.states.READY},{name:o.Event.SEEKED,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.MANUAL_SOURCE_CHANGE,from:this.getAllStates(),to:this.states.SOURCE_CHANGING},{name:o.Event.SOURCE_UNLOADED,from:this.getAllStates(),to:this.states.SOURCE_CHANGING},{name:o.Event.READY,from:this.states.SOURCE_CHANGING,to:this.states.READY},{name:o.Event.VIDEO_CHANGE,from:this.states.REBUFFERING,to:this.states.QUALITYCHANGE_REBUFFERING},{name:o.Event.AUDIO_CHANGE,from:this.states.REBUFFERING,to:this.states.QUALITYCHANGE_REBUFFERING},{name:o.Event.VIDEO_CHANGE,from:this.states.QUALITYCHANGE_REBUFFERING,to:this.states.QUALITYCHANGE_REBUFFERING},{name:o.Event.AUDIO_CHANGE,from:this.states.QUALITYCHANGE_REBUFFERING,to:this.states.QUALITYCHANGE_REBUFFERING},{name:"FINISH_QUALITYCHANGE_REBUFFERING",from:this.states.QUALITYCHANGE_REBUFFERING,to:this.states.REBUFFERING},{name:o.Event.AUDIOTRACK_CHANGED,from:a.PLAYING,to:a.AUDIOTRACK_CHANGING},{name:o.Event.AUDIOTRACK_CHANGED,from:a.PAUSE,to:a.PAUSE},{name:o.Event.AUDIOTRACK_CHANGED,from:a.REBUFFERING,to:a.REBUFFERING},{name:o.Event.AUDIOTRACK_CHANGED,from:a.END_PLAY_SEEKING,to:a.END_PLAY_SEEKING},{name:o.Event.AUDIOTRACK_CHANGED,from:a.AUDIOTRACK_CHANGING,to:a.AUDIOTRACK_CHANGING},{name:o.Event.TIMECHANGED,from:a.AUDIOTRACK_CHANGING,to:a.PLAYING},{name:o.Event.SUBTITLE_CHANGE,from:a.PLAYING,to:a.SUBTITLE_CHANGING},{name:o.Event.SUBTITLE_CHANGE,from:a.PAUSE,to:a.PAUSE},{name:o.Event.SUBTITLE_CHANGE,from:a.REBUFFERING,to:a.REBUFFERING},{name:o.Event.SUBTITLE_CHANGE,from:a.END_PLAY_SEEKING,to:a.END_PLAY_SEEKING},{name:o.Event.SUBTITLE_CHANGE,from:a.SUBTITLE_CHANGING,to:a.SUBTITLE_CHANGING},{name:o.Event.TIMECHANGED,from:a.SUBTITLE_CHANGING,to:a.PLAYING}],callbacks:{onpause:function(e,t,a,i){t===n.states.PLAYING&&(n.pausedTimestamp=i)},onbeforeevent:function(t,a,i,r,s){return t===o.Event.SEEK&&a===n.states.PAUSE&&(n.seekTimestamp=r,r-n.pausedTimestamp<e.PAUSE_SEEK_DELAY)?(n.stateMachine.PLAY_SEEK(r),!1):(t===o.Event.SEEK&&window.clearTimeout(n.seekedTimeout),t===o.Event.SEEKED&&a===n.states.PAUSED_SEEKING?(n.seekedTimestamp=r,n.seekedTimeout=window.setTimeout(function(){n.stateMachine.pause(r,s)},e.SEEKED_PAUSE_DELAY),!1):(a!==n.states.REBUFFERING||i!==n.states.QUALITYCHANGE_REBUFFERING)&&void 0)},onafterevent:function(e,t,a,i){a===n.states.QUALITYCHANGE_PAUSE&&n.stateMachine.FINISH_QUALITYCHANGE_PAUSE(i),a===n.states.QUALITYCHANGE&&n.stateMachine.FINISH_QUALITYCHANGE(i),a===n.states.QUALITYCHANGE_REBUFFERING&&n.stateMachine.FINISH_QUALITYCHANGE_REBUFFERING(i),a!==n.states.MUTING_READY&&a!==n.states.MUTING_PLAY&&a!==n.states.MUTING_PAUSE||n.stateMachine.FINISH_MUTING(i)},onenterstate:function(e,a,s,E,l){"none"===a&&t.starttime?n.onEnterStateTimestamp=t.starttime:n.onEnterStateTimestamp=E||(new Date).getTime(),i.logger.log("[ENTER] "+r.padRight(s,20)+"EVENT: "+r.padRight(e,20)+" from "+r.padRight(a,14)),l&&s!==n.states.PAUSED_SEEKING&&s!==n.states.PLAY_SEEKING&&s!==n.states.END_PLAY_SEEKING&&n.stateMachineCallbacks.setVideoTimeStartFromEvent(l),e===o.Event.START_CAST&&s===n.states.CASTING&&n.stateMachineCallbacks.startCasting(E,l)},onleavestate:function(e,t,a,r,s){if(r){n.addStatesToLog(e,t,a,r,s);var E=r-n.onEnterStateTimestamp;if(s&&a!==n.states.PAUSED_SEEKING&&a!==n.states.PLAY_SEEKING&&a!==n.states.END_PLAY_SEEKING&&n.stateMachineCallbacks.setVideoTimeEndFromEvent(s),"PLAY_SEEK"===e&&t===n.states.PAUSE)return!0;var l=String(t).toLowerCase();if(t===n.states.END_PLAY_SEEKING||t===n.states.PAUSED_SEEKING){var c=n.seekedTimestamp-n.seekTimestamp;n.stateMachineCallbacks[l](c,l,s)}else if(e===o.Event.UNLOAD&&t===n.states.PLAYING)n.stateMachineCallbacks.playingAndBye(E,l,s);else if(t===n.states.PAUSE&&a!==n.states.PAUSED_SEEKING)n.stateMachineCallbacks.setVideoTimeStartFromEvent(e),n.stateMachineCallbacks.pause(E,l,s);else{var u=n.stateMachineCallbacks[l];"function"==typeof u?u(E,l,s):i.logger.error("Could not find callback function for "+l)}s&&a!==n.states.PAUSED_SEEKING&&a!==n.states.PLAY_SEEKING&&a!==n.states.END_PLAY_SEEKING&&n.stateMachineCallbacks.setVideoTimeStartFromEvent(s),e===o.Event.VIDEO_CHANGE?n.stateMachineCallbacks.videoChange(s):e===o.Event.AUDIO_CHANGE?n.stateMachineCallbacks.audioChange(s):e===o.Event.MUTE?n.stateMachineCallbacks.mute():e===o.Event.UN_MUTE?n.stateMachineCallbacks.unMute():e===o.Event.MANUAL_SOURCE_CHANGE&&n.stateMachineCallbacks.manualSourceChange(s)}},onseek:function(e,t,a,i){n.seekTimestamp=i},onseeked:function(e,t,a,i){n.seekedTimestamp=i},ontimechanged:function(e,t,a,i,r){var s=i-n.onEnterStateTimestamp;s>59700&&(n.stateMachineCallbacks.setVideoTimeEndFromEvent(r),n.stateMachineCallbacks.heartbeat(s,String(t).toLowerCase(),r),n.onEnterStateTimestamp=i,n.stateMachineCallbacks.setVideoTimeStartFromEvent(r))},onplayerError:function(e,t,a,i,r){n.stateMachineCallbacks.error(r)}}})},e.prototype.callEvent=function(e,t,n){var a=this.stateMachine[e];if(a)try{a.call(this.stateMachine,n,t)}catch(n){i.logger.error("Exception occured in State Machine callback "+e,a,t,n)}else i.logger.log("Ignored Event: "+e)},e.prototype.addStatesToLog=function(e,t,n,a,i){this.enabledDebugging&&this.debuggingStates.push(new E.EventDebugging(e,t,n,a,i))},e.prototype.getStates=function(){return this.debuggingStates},e.prototype.setEnabledDebugging=function(e){this.enabledDebugging=e},e.prototype.updateMetadata=function(e){},e.PAUSE_SEEK_DELAY=200,e.SEEKED_PAUSE_DELAY=300,e}();t.Bitmovin7AnalyticsStateMachine=l},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),s=n(58),o=n(4),E=function(e){function t(t,n,a){var i=e.call(this)||this;return i.internalAdapter=new s.VideojsInternalAdapter(n,a),i.analytics=new o.Analytics(t,n,i.internalAdapter),i}return i(t,e),t}(r.Adapter);t.VideojsAdapter=E},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(9),o=n(59),E=n(2),l=n(3),c=n(6),u=n(14),d=n(7),m=function(e){function t(t,n){var a=e.call(this,n)||this;return a.player=t,a._drmPerformanceInfo={drmUsed:!1},a.onBeforeUnLoadEvent=!1,a.getPlayerVersion=function(){return window.videojs?window.videojs.VERSION:"unknown"},a.getPlayerName=function(){return E.Player.VIDEOJS},a.getPlayerTech=function(){return"html5"},a.getAutoPlay=function(){return 1==a.player.autoplay()},a.stateMachine=new o.VideojsAnalyticsStateMachine(a.stateMachineCallbacks,a.opts),a.register(),a}return i(t,e),Object.defineProperty(t.prototype,"drmPerformanceInfo",{get:function(){return this._drmPerformanceInfo},enumerable:!0,configurable:!0}),t.prototype.getStreamType=function(e){var t=c.getMIMETypeFromFileExtension(e);if(t)return u.getStreamTypeFromMIMEType(t)},t.prototype.getStreamSources=function(e){switch(this.getStreamType(e)){case"hls":return{m3u8Url:e};case"dash":return{mpdUrl:e};default:return{progUrl:e}}},t.prototype.getCurrentPlaybackInfo=function(){var e=r({},this.getCommonPlaybackInfo(),this.getStreamSources(this.player.currentSrc()),{streamFormat:this.getStreamType(this.player.currentSrc()),isLive:this.player.duration()===1/0,size:this.player.isFullscreen()?d.PlayerSize.Fullscreen:d.PlayerSize.Window,playerTech:this.getPlayerTech(),isMuted:this.player.muted(),videoDuration:this.player.duration(),videoWindowHeight:this.player.height(),videoWindowWidth:this.player.width(),videoPlaybackHeight:this.player.videoHeight(),videoPlaybackWidth:this.player.videoWidth(),droppedFrames:0}),t=this.getCurrentQualityLevelInfo();return t&&(e.videoPlaybackWidth=t.width||e.videoPlaybackWidth,e.videoPlaybackWidth=t.height||e.videoPlaybackHeight,e.videoBitrate=t.bitrate),e},t.prototype.getCurrentQualityLevelInfo=function(){return null},t.prototype.register=function(){var e,t=this,n=this;this.player.on("loadedmetadata",function(){n.eventCallback(l.Event.SOURCE_LOADED,{})}),this.player.ready(function(){n.eventCallback(l.Event.READY,{})}),this.player.on(l.Event.PLAY,function(){n.eventCallback(l.Event.PLAY,{currentTime:this.currentTime()})}),this.player.on(l.Event.PAUSE,function(){n.eventCallback(l.Event.PAUSE,{currentTime:this.currentTime()})}),this.player.on("error",function(){var e=this.error();n.eventCallback(l.Event.ERROR,{currentTime:this.currentTime(),code:e.code,message:e.message})}),this.player.on("volumechange",function(){this.muted()?n.eventCallback(l.Event.MUTE,{currentTime:this.currentTime()}):n.eventCallback(l.Event.UN_MUTE,{currentTime:this.currentTime()})}),this.player.on(l.Event.SEEK,function(){n.eventCallback(l.Event.SEEK,{currentTime:this.currentTime()})}),this.player.on(l.Event.SEEKED,function(){n.eventCallback(l.Event.SEEKED,{currentTime:this.currentTime()})}),this.player.on("stalled",function(){n.eventCallback(l.Event.START_BUFFERING,{currentTime:this.currentTime()})}),this.player.on("waiting",function(){n.eventCallback(l.Event.START_BUFFERING,{currentTime:this.currentTime()})}),this.player.on("timeupdate",function(){n.eventCallback(l.Event.TIMECHANGED,{currentTime:this.currentTime()});var t=this.tech_.hls.playlists.media();if(t){var a=t.attributes,i=a.BANDWIDTH,r=(a.RESOLUTION||{}).width,s=(a.RESOLUTION||{}).height;if(e!==i){var o={width:r,height:s,bitrate:i,currentTime:this.currentTime()};n.eventCallback(l.Event.VIDEO_CHANGE,o),e=i}if(this.tech({IWillNotUseThisInPlugins:!0}).hls){var E=this.tech_.hls;if(!E.playlists||"function"!=typeof E.playlists.media)return;var c=E.playlists.media();if(!c)return;var u=c.attributes,d=u.BANDWIDTH,m=(u.RESOLUTION||{}).width,A=(u.RESOLUTION||{}).height;if(isNaN(e)||e!==d){o={width:m,height:A,bitrate:d,currentTime:this.currentTime()};n.eventCallback(l.Event.VIDEO_CHANGE,o),e=d}}}}),window.onunload=window.onbeforeunload=function(){t.onBeforeUnLoadEvent||(t.onBeforeUnLoadEvent=!0,t.eventCallback(l.Event.UNLOAD,{currentTime:t.player.currentTime()}))}},t.prototype.sourceChange=function(e,t){this.stateMachine.sourceChange(e,t,this.player.currentTime())},t}(s.InternalAdapter);t.VideojsInternalAdapter=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=n(1),r=n(1),s=n(10),o=n(3);!function(e){e.AD="AD",e.SETUP="SETUP",e.STARTUP="STARTUP",e.READY="READY",e.PLAYING="PLAYING",e.REBUFFERING="REBUFFERING",e.PAUSE="PAUSE",e.QUALITYCHANGE="QUALITYCHANGE",e.PAUSED_SEEKING="PAUSED_SEEKING",e.PLAY_SEEKING="PLAY_SEEKING",e.END_PLAY_SEEKING="END_PLAY_SEEKING",e.QUALITYCHANGE_PAUSE="QUALITYCHANGE_PAUSE",e.QUALITYCHANGE_REBUFFERING="QUALITYCHANGE_REBUFFERING",e.SOURCE_CHANGING="SOURCE_CHANGING",e.END="END",e.ERROR="ERROR",e.MUTING_READY="MUTING_READY",e.MUTING_PLAY="MUTING_PLAY",e.MUTING_PAUSE="MUTING_PAUSE",e.CASTING="CASTING"}(a||(a={}));var E=function(){function e(e,t){var n=this;this.sourceChange=function(e,t,a){n.callEvent(o.Event.MANUAL_SOURCE_CHANGE,{config:e,currentTime:a},t)},this.stateMachineCallbacks=e,this.seekTimestamp=0,this.seekedTimestamp=0,this.seekedTimeout=0,this.onEnterStateTimestamp=0,this.createStateMachine(t)}return e.prototype.getAllStates=function(){return Object.keys(a).map(function(e){return a[e]}).concat(["FINISH_PLAY_SEEKING","PLAY_SEEK","FINISH_QUALITYCHANGE_PAUSE","FINISH_QUALITYCHANGE","FINISH_QUALITYCHANGE_REBUFFERING"])},e.prototype.getAllStatesBut=function(e){return this.getAllStates().filter(function(t){return t!==e})},e.prototype.createStateMachine=function(e){var t=this;this.stateMachine=s.create({initial:a.SETUP,error:function(e,t,n,a,r,s){i.logger.error("Error in statemachine: "+s)},events:[{name:o.Event.SOURCE_LOADED,from:[a.SETUP,a.ERROR,a.SOURCE_CHANGING],to:a.READY},{name:o.Event.TIMECHANGED,from:a.SETUP,to:a.SETUP},{name:o.Event.SOURCE_LOADED,from:a.READY,to:a.READY},{name:o.Event.READY,from:[a.SETUP,a.ERROR],to:a.READY},{name:o.Event.PLAY,from:a.READY,to:a.STARTUP},{name:o.Event.START_BUFFERING,from:a.STARTUP,to:a.STARTUP},{name:o.Event.END_BUFFERING,from:a.STARTUP,to:a.STARTUP},{name:o.Event.VIDEO_CHANGE,from:a.STARTUP,to:a.STARTUP},{name:o.Event.AUDIO_CHANGE,from:a.STARTUP,to:a.STARTUP},{name:o.Event.TIMECHANGED,from:a.STARTUP,to:a.PLAYING},{name:o.Event.TIMECHANGED,from:a.PLAYING,to:a.PLAYING},{name:o.Event.END_BUFFERING,from:a.PLAYING,to:a.PLAYING},{name:o.Event.START_BUFFERING,from:a.PLAYING,to:a.REBUFFERING},{name:o.Event.START_BUFFERING,from:a.REBUFFERING,to:a.REBUFFERING},{name:o.Event.TIMECHANGED,from:a.REBUFFERING,to:a.PLAYING},{name:o.Event.SEEK,from:a.STARTUP,to:a.STARTUP},{name:o.Event.SEEK,from:a.PLAYING,to:a.PLAY_SEEKING},{name:o.Event.TIMECHANGED,from:a.PLAY_SEEKING,to:a.PLAY_SEEKING},{name:o.Event.TIMECHANGED,from:a.PAUSED_SEEKING,to:a.PAUSED_SEEKING},{name:o.Event.PAUSE,from:a.PLAYING,to:a.PAUSE},{name:o.Event.PAUSE,from:a.REBUFFERING,to:a.PAUSE},{name:o.Event.TIMECHANGED,from:a.PAUSE,to:a.PAUSE},{name:o.Event.PLAY,from:a.PAUSE,to:a.PLAYING},{name:o.Event.VIDEO_CHANGE,from:a.PLAYING,to:a.QUALITYCHANGE},{name:o.Event.AUDIO_CHANGE,from:a.PLAYING,to:a.QUALITYCHANGE},{name:o.Event.VIDEO_CHANGE,from:a.QUALITYCHANGE,to:a.QUALITYCHANGE},{name:o.Event.AUDIO_CHANGE,from:a.QUALITYCHANGE,to:a.QUALITYCHANGE},{name:"FINISH_QUALITYCHANGE",from:a.QUALITYCHANGE,to:a.PLAYING},{name:o.Event.VIDEO_CHANGE,from:a.PAUSE,to:a.QUALITYCHANGE_PAUSE},{name:o.Event.AUDIO_CHANGE,from:a.PAUSE,to:a.QUALITYCHANGE_PAUSE},{name:o.Event.VIDEO_CHANGE,from:a.QUALITYCHANGE_PAUSE,to:a.QUALITYCHANGE_PAUSE},{name:o.Event.AUDIO_CHANGE,from:a.QUALITYCHANGE_PAUSE,to:a.QUALITYCHANGE_PAUSE},{name:"FINISH_QUALITYCHANGE_PAUSE",from:a.QUALITYCHANGE_PAUSE,to:a.PAUSE},{name:o.Event.SEEK,from:a.PAUSE,to:a.PAUSED_SEEKING},{name:o.Event.SEEK,from:a.PAUSED_SEEKING,to:a.PAUSED_SEEKING},{name:o.Event.AUDIO_CHANGE,from:a.PAUSED_SEEKING,to:a.PAUSED_SEEKING},{name:o.Event.VIDEO_CHANGE,from:a.PAUSED_SEEKING,to:a.PAUSED_SEEKING},{name:o.Event.START_BUFFERING,from:a.PAUSED_SEEKING,to:a.PAUSED_SEEKING},{name:o.Event.END_BUFFERING,from:a.PAUSED_SEEKING,to:a.PAUSED_SEEKING},{name:o.Event.SEEKED,from:a.PAUSED_SEEKING,to:a.PAUSE},{name:o.Event.PLAY,from:a.PAUSED_SEEKING,to:a.PLAYING},{name:o.Event.PAUSE,from:a.PAUSED_SEEKING,to:a.PAUSE},{name:"PLAY_SEEK",from:a.PAUSE,to:a.PLAY_SEEKING},{name:"PLAY_SEEK",from:a.PAUSED_SEEKING,to:a.PLAY_SEEKING},{name:"PLAY_SEEK",from:a.PLAY_SEEKING,to:a.PLAY_SEEKING},{name:o.Event.SEEK,from:a.PLAY_SEEKING,to:a.PLAY_SEEKING},{name:o.Event.AUDIO_CHANGE,from:a.PLAY_SEEKING,to:a.PLAY_SEEKING},{name:o.Event.VIDEO_CHANGE,from:a.PLAY_SEEKING,to:a.PLAY_SEEKING},{name:o.Event.START_BUFFERING,from:a.PLAY_SEEKING,to:a.PLAY_SEEKING},{name:o.Event.END_BUFFERING,from:a.PLAY_SEEKING,to:a.PLAY_SEEKING},{name:o.Event.SEEKED,from:a.PLAY_SEEKING,to:a.PLAY_SEEKING},{name:o.Event.SEEKED,from:a.PLAY_SEEKING,to:a.END_PLAY_SEEKING},{name:o.Event.START_BUFFERING,from:a.END_PLAY_SEEKING,to:a.END_PLAY_SEEKING},{name:o.Event.END_BUFFERING,from:a.END_PLAY_SEEKING,to:a.END_PLAY_SEEKING},{name:o.Event.SEEKED,from:a.END_PLAY_SEEKING,to:a.END_PLAY_SEEKING},{name:o.Event.TIMECHANGED,from:a.END_PLAY_SEEKING,to:a.PLAYING},{name:o.Event.END,from:a.PLAY_SEEKING,to:a.END},{name:o.Event.END,from:a.PAUSED_SEEKING,to:a.END},{name:o.Event.END,from:a.PLAYING,to:a.END},{name:o.Event.END,from:a.PAUSE,to:a.END},{name:o.Event.SEEK,from:a.END,to:a.END},{name:o.Event.SEEKED,from:a.END,to:a.END},{name:o.Event.TIMECHANGED,from:a.END,to:a.END},{name:o.Event.END_BUFFERING,from:a.END,to:a.END},{name:o.Event.START_BUFFERING,from:a.END,to:a.END},{name:o.Event.END,from:a.END,to:a.END},{name:o.Event.SEEKED,from:a.PLAYING,to:a.PLAYING},{name:o.Event.PLAY,from:a.END,to:a.PLAYING},{name:o.Event.ERROR,from:this.getAllStates(),to:a.ERROR},{name:o.Event.PAUSE,from:a.ERROR,to:a.ERROR},{name:o.Event.SEEK,from:a.END_PLAY_SEEKING,to:a.PLAY_SEEKING},{name:"FINISH_PLAY_SEEKING",from:a.END_PLAY_SEEKING,to:a.PLAYING},{name:o.Event.UNLOAD,from:this.getAllStates(),to:a.END},{name:o.Event.START_AD,from:a.PLAYING,to:a.AD},{name:o.Event.END_AD,from:a.AD,to:a.PLAYING},{name:o.Event.MUTE,from:a.READY,to:a.MUTING_READY},{name:o.Event.UN_MUTE,from:a.READY,to:a.MUTING_READY},{name:"FINISH_MUTING",from:a.MUTING_READY,to:a.READY},{name:o.Event.MUTE,from:a.PLAYING,to:a.MUTING_PLAY},{name:o.Event.UN_MUTE,from:a.PLAYING,to:a.MUTING_PLAY},{name:"FINISH_MUTING",from:a.MUTING_PLAY,to:a.PLAYING},{name:o.Event.MUTE,from:a.PAUSE,to:a.MUTING_PAUSE},{name:o.Event.UN_MUTE,from:a.PAUSE,to:a.MUTING_PAUSE},{name:"FINISH_MUTING",from:a.MUTING_PAUSE,to:a.PAUSE},{name:o.Event.START_CAST,from:[a.READY,a.PAUSE],to:a.CASTING},{name:o.Event.PAUSE,from:a.CASTING,to:a.CASTING},{name:o.Event.PLAY,from:a.CASTING,to:a.CASTING},{name:o.Event.TIMECHANGED,from:a.CASTING,to:a.CASTING},{name:o.Event.MUTE,from:a.CASTING,to:a.CASTING},{name:o.Event.SEEK,from:a.CASTING,to:a.CASTING},{name:o.Event.SEEKED,from:a.CASTING,to:a.CASTING},{name:o.Event.END_CAST,from:a.CASTING,to:a.READY},{name:o.Event.SEEK,from:a.READY,to:a.READY},{name:o.Event.SEEKED,from:a.READY,to:a.READY},{name:o.Event.SEEKED,from:a.STARTUP,to:a.STARTUP},{name:o.Event.MANUAL_SOURCE_CHANGE,from:this.getAllStatesBut(a.SETUP),to:a.SOURCE_CHANGING},{name:o.Event.MANUAL_SOURCE_CHANGE,from:a.SETUP,to:a.SETUP},{name:o.Event.TIMECHANGED,from:a.SOURCE_CHANGING,to:a.SOURCE_CHANGING},{name:o.Event.VIDEO_CHANGE,from:a.REBUFFERING,to:a.QUALITYCHANGE_REBUFFERING},{name:o.Event.AUDIO_CHANGE,from:a.REBUFFERING,to:a.QUALITYCHANGE_REBUFFERING},{name:o.Event.VIDEO_CHANGE,from:a.QUALITYCHANGE_REBUFFERING,to:a.QUALITYCHANGE_REBUFFERING},{name:o.Event.AUDIO_CHANGE,from:a.QUALITYCHANGE_REBUFFERING,to:a.QUALITYCHANGE_REBUFFERING},{name:"FINISH_QUALITYCHANGE_REBUFFERING",from:a.QUALITYCHANGE_REBUFFERING,to:a.REBUFFERING}],callbacks:{onafterevent:function(e,n,i,r){i===a.QUALITYCHANGE&&t.stateMachine.FINISH_QUALITYCHANGE(r),i!==a.MUTING_READY&&i!==a.MUTING_PLAY&&i!==a.MUTING_PAUSE||t.stateMachine.FINISH_MUTING(r)},onenterstate:function(n,s,E,l,c){"none"===s&&e.starttime?t.onEnterStateTimestamp=e.starttime:t.onEnterStateTimestamp=l||(new Date).getTime(),i.logger.log("[ENTER] "+r.padRight(E,20)+"EVENT: "+r.padRight(n,20)+" from "+r.padRight(s,14)),c&&E!==a.PAUSED_SEEKING&&E!==a.PLAY_SEEKING&&E!==a.END_PLAY_SEEKING&&t.stateMachineCallbacks.setVideoTimeStartFromEvent(c),"PLAY_SEEK"===n&&E===a.PLAY_SEEKING&&E!==a.PLAY_SEEKING&&E!==a.END_PLAY_SEEKING&&(t.seekTimestamp=t.onEnterStateTimestamp),n===o.Event.START_CAST&&E===a.CASTING&&t.stateMachineCallbacks.startCasting(l,c)},onleavestate:function(e,n,s,E,l){if(E){i.logger.log("[LEAVE] "+r.padRight(n,20)+" EVENT: "+r.padRight(e,20)+" to "+r.padRight(s,20));var c=E-t.onEnterStateTimestamp;if(l&&s!==a.PAUSED_SEEKING&&s!==a.PLAY_SEEKING&&s!==a.END_PLAY_SEEKING&&t.stateMachineCallbacks.setVideoTimeEndFromEvent(l),"PLAY_SEEK"===e&&n===a.PAUSE)return!0;var u=String(n).toLowerCase();if(n===a.END_PLAY_SEEKING||n===a.PAUSED_SEEKING){var d=t.seekedTimestamp-t.seekTimestamp;t.stateMachineCallbacks[u](d,u,l)}else if(e===o.Event.UNLOAD&&n===a.PLAYING)t.stateMachineCallbacks.playingAndBye(c,u,l);else if(n===a.PAUSE&&s!==a.PAUSED_SEEKING)t.stateMachineCallbacks.setVideoTimeStartFromEvent(e),t.stateMachineCallbacks.pause(c,u,l);else{var m=t.stateMachineCallbacks[u];"function"==typeof m?m(c,u,l):i.logger.error("Could not find callback function for "+u)}l&&s!==a.PAUSED_SEEKING&&s!==a.PLAY_SEEKING&&s!==a.END_PLAY_SEEKING&&t.stateMachineCallbacks.setVideoTimeStartFromEvent(l),e===o.Event.VIDEO_CHANGE?t.stateMachineCallbacks.videoChange(l):e===o.Event.AUDIO_CHANGE?t.stateMachineCallbacks.audioChange(l):e===o.Event.MUTE?t.stateMachineCallbacks.mute():e===o.Event.UN_MUTE?t.stateMachineCallbacks.unMute():e===o.Event.MANUAL_SOURCE_CHANGE&&t.stateMachineCallbacks.manualSourceChange(l)}},onseek:function(e,n,a,i){t.seekTimestamp=i},onseeked:function(e,n,a,i){t.seekedTimestamp=i},ontimechanged:function(e,n,a,i,r){var s=i-t.onEnterStateTimestamp;s>59700&&(t.stateMachineCallbacks.setVideoTimeEndFromEvent(r),t.stateMachineCallbacks.heartbeat(s,String(n).toLowerCase(),r),t.onEnterStateTimestamp=i,t.stateMachineCallbacks.setVideoTimeStartFromEvent(r))},onplayerError:function(e,n,a,i,r){t.stateMachineCallbacks.error(r)}}})},e.prototype.callEvent=function(e,t,n){var a=this.stateMachine[e];a?a.call(this.stateMachine,n,t):i.logger.log("Ignored Event: "+e)},e.prototype.updateMetadata=function(){},e}();t.VideojsAnalyticsStateMachine=E},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),s=n(5),o=n(61),E=function(e){function t(t,n,a){var i=e.call(this)||this;return i.internalAdapter=new o.ShakaInternalAdapter(n,a),i.analytics=new r.Analytics(t,n,i.internalAdapter),i}return i(t,e),t}(s.Adapter);t.ShakaAdapter=E},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),s=n(2),o=n(6),E=function(e){function t(t,n){var a=e.call(this,t.getMediaElement(),n)||this;return a.player=t,a.getPlayerName=function(){return s.Player.SHAKA},a.getPlayerVersion=function(){return a.player.constructor.version},a.isLive=function(){return!!a.player&&a.player.isLive()},a}return i(t,e),t.prototype.getMIMEType=function(){return o.MIMETypes.DASH},t.prototype.getStreamURL=function(){return this.player?this.player.getManifestUri():null},t.prototype.getCurrentQualityLevelInfo=function(){var e=this.player.getVariantTracks().filter(function(e){return e.active}).filter(function(e){return e.videoCodec||void 0!==e.videoId})[0];return e?{bitrate:e.videoBandwidth||e.bandwidth,width:e.width,height:e.height}:null},t}(r.HTML5InternalAdapter);t.ShakaInternalAdapter=E},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),s=n(63),o=function(e){function t(t,n,a){var i=e.call(this)||this;return i.internalAdapter=new s.DashjsInternalAdapter(n,a),i.analytics=new r.Analytics(t,n,i.internalAdapter),i}return i(t,e),t}(n(5).Adapter);t.DashjsAdapter=o},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),s=n(2),o=n(6),E=function(e){function t(t,n){var a=e.call(this,null,n)||this;return a.mediaPlayer=t,a.onBeforeUnLoadEvent=!1,a.getPlayerName=function(){return s.Player.DASHJS},a.getPlayerVersion=function(){return a.mediaPlayer.getVersion()},a}return i(t,e),t.prototype.initialize=function(){var e=this,t=null,n=!1;try{t=this.mediaPlayer.getVideoElement()}catch(e){}t?this.setMediaElement(t):this.mediaPlayer.on("canPlay",function(){n||(t=e.mediaPlayer.getVideoElement(),n=!0,e.setMediaElement(t))},this)},t.prototype.getMIMEType=function(){return o.MIMETypes.DASH},t.prototype.getStreamURL=function(){if(this.mediaPlayer){var e=this.mediaPlayer.getSource();return e?e.toString():void 0}},t.prototype.getCurrentQualityLevelInfo=function(){if(this.mediaPlayer){var e=this.mediaPlayer.getBitrateInfoListFor("video")[this.mediaPlayer.getQualityFor("video")];return{width:e.width,height:e.height,bitrate:e.bitrate}}return null},t}(r.HTML5InternalAdapter);t.DashjsInternalAdapter=E},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),s=n(5),o=n(65),E=function(e){function t(t,n,a){var i=e.call(this)||this;return i.internalAdapter=new o.HTMLVideoElementInternalAdapter(n,a),i.analytics=new r.Analytics(t,n,i.internalAdapter),i}return i(t,e),t}(s.Adapter);t.HTMLVideoElementAdapter=E},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),s=n(2),o=n(0),E=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.getPlayerName=function(){return s.Player.HTML5},a.getPlayerVersion=function(){var e=o.getBrowserInfo();return e.name+" "+e.version},a}return i(t,e),t.prototype.getStreamURL=function(){return this.mediaElement?this.mediaElement.currentSrc:void 0},t.prototype.getCurrentQualityLevelInfo=function(){return{bitrate:void 0,width:this.mediaElement?this.mediaElement.videoWidth:void 0,height:this.mediaElement?this.mediaElement.videoHeight:void 0}},t}(r.HTML5InternalAdapter);t.HTMLVideoElementInternalAdapter=E}])});
//# sourceMappingURL=bitmovinanalytics.min.js.map